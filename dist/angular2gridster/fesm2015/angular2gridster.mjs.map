{"version":3,"file":"angular2gridster.mjs","sources":["../../../projects/angular2gridster/src/lib/utils/utils.ts","../../../projects/angular2gridster/src/lib/gridList/gridList.ts","../../../projects/angular2gridster/src/lib/gridster.service.ts","../../../projects/angular2gridster/src/lib/GridsterOptions.ts","../../../projects/angular2gridster/src/lib/gridster-prototype/gridster-prototype.service.ts","../../../projects/angular2gridster/src/lib/gridster.component.ts","../../../projects/angular2gridster/src/lib/gridList/GridListItem.ts","../../../projects/angular2gridster/src/lib/utils/DraggableEvent.ts","../../../projects/angular2gridster/src/lib/utils/draggable.ts","../../../projects/angular2gridster/src/lib/gridster-item/gridster-item.component.ts","../../../projects/angular2gridster/src/lib/gridster-prototype/gridster-item-prototype.directive.ts","../../../projects/angular2gridster/src/lib/gridster.module.ts","../../../projects/angular2gridster/src/public_api.ts","../../../projects/angular2gridster/src/angular2gridster.ts"],"sourcesContent":["\r\nimport { DraggableEvent } from './DraggableEvent';\r\n\r\nexport const utils = {\r\n    setCssElementPosition: function ($element: HTMLElement, position: {x: number, y: number}) {\r\n        $element.style.left = position.x + 'px';\r\n        $element.style.top = position.y + 'px';\r\n    },\r\n    resetCSSElementPosition: function ($element: HTMLElement) {\r\n        $element.style.left = '';\r\n        $element.style.top = '';\r\n    },\r\n    setTransform: function ($element: HTMLElement, position: {x: number, y: number}) {\r\n        const left = position.x;\r\n        const top = position.y;\r\n\r\n        // Replace unitless items with px\r\n        const translate = `translate(${left}px,${top}px)`;\r\n\r\n        $element.style['transform'] = translate;\r\n        $element.style['WebkitTransform'] = translate;\r\n        $element.style['MozTransform'] = translate;\r\n        $element.style['msTransform'] = translate;\r\n        $element.style['OTransform'] = translate;\r\n    },\r\n    resetTransform: function ($element: HTMLElement) {\r\n        $element.style['transform'] = '';\r\n        $element.style['WebkitTransform'] = '';\r\n        $element.style['MozTransform'] = '';\r\n        $element.style['msTransform'] = '';\r\n        $element.style['OTransform'] = '';\r\n    },\r\n    clearSelection: () => {\r\n        if (document['selection']) {\r\n            document['selection'].empty();\r\n        } else if (window.getSelection) {\r\n            window.getSelection().removeAllRanges();\r\n        }\r\n    },\r\n    isElementFitContainer: function (element: HTMLElement, containerEl: HTMLElement): boolean {\r\n        const containerRect = containerEl.getBoundingClientRect();\r\n        const elRect = element.getBoundingClientRect();\r\n\r\n        return elRect.left > containerRect.left &&\r\n            elRect.right < containerRect.right &&\r\n            elRect.top > containerRect.top &&\r\n            elRect.bottom < containerRect.bottom;\r\n    },\r\n    isElementIntersectContainer: function (element: HTMLElement, containerEl: HTMLElement): boolean {\r\n        const containerRect = containerEl.getBoundingClientRect();\r\n        const elRect = element.getBoundingClientRect();\r\n\r\n        const elWidth = elRect.right - elRect.left;\r\n        const elHeight = elRect.bottom - elRect.top;\r\n\r\n        return (elRect.left + (elWidth / 2)) > containerRect.left &&\r\n            (elRect.right - (elWidth / 2)) < containerRect.right &&\r\n            (elRect.top + (elHeight / 2)) > containerRect.top &&\r\n            (elRect.bottom - (elHeight / 2)) < containerRect.bottom;\r\n    },\r\n    isElementTouchContainer: function (element: HTMLElement, containerEl: HTMLElement): boolean {\r\n        const containerRect = containerEl.getBoundingClientRect();\r\n        const elRect = element.getBoundingClientRect();\r\n\r\n        return elRect.right > containerRect.left &&\r\n            elRect.bottom > containerRect.top &&\r\n            elRect.left < containerRect.right &&\r\n            elRect.top < containerRect.bottom;\r\n    },\r\n    isCursorAboveElement: function (event: DraggableEvent, element): boolean {\r\n        const elRect = element.getBoundingClientRect();\r\n\r\n        return event.pageX > elRect.left &&\r\n            event.pageX < elRect.right &&\r\n            event.pageY > elRect.top &&\r\n            event.pageY < elRect.bottom;\r\n    },\r\n    getElementOuterHeight: function ($element: HTMLElement) {\r\n        const styleObj = window.getComputedStyle($element);\r\n        // NOTE: Manually calculating height because IE's `clientHeight` isn't always\r\n        // reliable.\r\n        return parseFloat(styleObj.getPropertyValue('height')) +\r\n            parseFloat(styleObj.getPropertyValue('padding-top')) +\r\n            parseFloat(styleObj.getPropertyValue('padding-bottom'));\r\n    },\r\n    getRelativeCoordinates: (element, parentElement): {top: number, left: number} => {\r\n        const parentElementRect = parentElement.getBoundingClientRect();\r\n        const elementRect = element.getBoundingClientRect();\r\n\r\n        return {\r\n            top: elementRect.top - parentElementRect.top,\r\n            left: elementRect.left - parentElementRect.left\r\n        };\r\n    },\r\n    getScrollableContainer(node) {\r\n        const regex = /(auto|scroll)/;\r\n        const parents = (_node, ps) => {\r\n            if (_node.parentNode === null) {\r\n                return ps;\r\n            }\r\n            return parents(_node.parentNode, ps.concat([_node]));\r\n        };\r\n\r\n        const style = (_node, prop) => {\r\n            return getComputedStyle(_node, null).getPropertyValue(prop);\r\n        };\r\n        const overflow = _node => {\r\n            return (\r\n                style(_node, 'overflow') + style(_node, 'overflow-y') + style(_node, 'overflow-x')\r\n            );\r\n        };\r\n        const scroll = _node => regex.test(overflow(_node));\r\n\r\n        /* eslint-disable consistent-return */\r\n        const scrollParent = _node => {\r\n            if (!(_node instanceof HTMLElement || _node instanceof SVGElement)) {\r\n                return;\r\n            }\r\n\r\n            const ps = parents(_node.parentNode, []);\r\n\r\n            for (let i = 0; i < ps.length; i += 1) {\r\n                if (scroll(ps[i])) {\r\n                    return ps[i];\r\n                }\r\n            }\r\n\r\n            return document.scrollingElement || document.documentElement;\r\n        };\r\n\r\n        return scrollParent(node);\r\n    }\r\n};\r\n","import { GridListItem } from './GridListItem';\r\nimport { IGridsterOptions } from '../IGridsterOptions';\r\n\r\nconst GridCol = function(lanes) {\r\n    for (let i = 0; i < lanes; i++) {\r\n        this.push(null);\r\n    }\r\n};\r\n// Extend the Array prototype\r\nGridCol.prototype = [];\r\n\r\n/**\r\n * A GridList manages the two-dimensional positions from a list of items,\r\n * within a virtual matrix.\r\n *\r\n * The GridList's main function is to convert the item positions from one\r\n * grid size to another, maintaining as much of their order as possible.\r\n *\r\n * The GridList's second function is to handle collisions when moving an item\r\n * over another.\r\n *\r\n * The positioning algorithm places items in columns. Starting from left to\r\n * right, going through each column top to bottom.\r\n *\r\n * The size of an item is expressed using the number of cols and rows it\r\n * takes up within the grid (w and h)\r\n *\r\n * The position of an item is express using the col and row position within\r\n * the grid (x and y)\r\n *\r\n * An item is an object of structure:\r\n * {\r\n *   w: 3, h: 1,\r\n *   x: 0, y: 1\r\n * }\r\n */\r\nexport class GridList {\r\n    items: Array<GridListItem>;\r\n    grid: Array<Array<GridListItem>>;\r\n\r\n    options: IGridsterOptions;\r\n\r\n    constructor(items: Array<GridListItem>, options: IGridsterOptions) {\r\n        this.options = options;\r\n\r\n        this.items = items;\r\n\r\n        this.adjustSizeOfItems();\r\n\r\n        this.generateGrid();\r\n    }\r\n\r\n    /**\r\n     * Illustrates grid as text-based table, using a number identifier for each\r\n     * item. E.g.\r\n     *\r\n     *  #|  0  1  2  3  4  5  6  7  8  9 10 11 12 13\r\n     *  --------------------------------------------\r\n     *  0| 00 02 03 04 04 06 08 08 08 12 12 13 14 16\r\n     *  1| 01 -- 03 05 05 07 09 10 11 11 -- 13 15 --\r\n     *\r\n     * Warn: Does not work if items don't have a width or height specified\r\n     * besides their position in the grid.\r\n     */\r\n    toString() {\r\n        const widthOfGrid = this.grid.length;\r\n        let output = '\\n #|',\r\n            border = '\\n --',\r\n            item,\r\n            i,\r\n            j;\r\n\r\n        // Render the table header\r\n        for (i = 0; i < widthOfGrid; i++) {\r\n            output += ' ' + this.padNumber(i, ' ');\r\n            border += '---';\r\n        }\r\n        output += border;\r\n\r\n        // Render table contents row by row, as we go on the y axis\r\n        for (i = 0; i < this.options.lanes; i++) {\r\n            output += '\\n' + this.padNumber(i, ' ') + '|';\r\n            for (j = 0; j < widthOfGrid; j++) {\r\n                output += ' ';\r\n                item = this.grid[j][i];\r\n                output += item\r\n                    ? this.padNumber(this.items.indexOf(item), '0')\r\n                    : '--';\r\n            }\r\n        }\r\n        output += '\\n';\r\n        return output;\r\n    }\r\n\r\n    setOption(name: string, value: any) {\r\n        this.options[name] = value;\r\n    }\r\n\r\n    /**\r\n     * Build the grid structure from scratch, with the current item positions\r\n     */\r\n    generateGrid() {\r\n        let i;\r\n        this.resetGrid();\r\n        for (i = 0; i < this.items.length; i++) {\r\n            this.markItemPositionToGrid(this.items[i]);\r\n        }\r\n    }\r\n\r\n    resizeGrid(lanes: number) {\r\n        let currentColumn = 0;\r\n\r\n        this.options.lanes = lanes;\r\n        this.adjustSizeOfItems();\r\n\r\n        this.sortItemsByPosition();\r\n        this.resetGrid();\r\n\r\n        // The items will be sorted based on their index within the this.items array,\r\n        // that is their \"1d position\"\r\n        for (let i = 0; i < this.items.length; i++) {\r\n            const item = this.items[i],\r\n                position = this.getItemPosition(item);\r\n\r\n            this.updateItemPosition(\r\n                item,\r\n                this.findPositionForItem(item, { x: currentColumn, y: 0 })\r\n            );\r\n\r\n            // New items should never be placed to the left of previous items\r\n            currentColumn = Math.max(currentColumn, position.x);\r\n        }\r\n\r\n        this.pullItemsToLeft();\r\n    }\r\n\r\n    /**\r\n     * This method has two options for the position we want for the item:\r\n     * - Starting from a certain row/column number and only looking for\r\n     *   positions to its right\r\n     * - Accepting positions for a certain row number only (use-case: items\r\n     *   being shifted to the left/right as a result of collisions)\r\n     *\r\n     * @param Object item\r\n     * @param Object start Position from which to start\r\n     *     the search.\r\n     * @param number [fixedRow] If provided, we're going to try to find a\r\n     *     position for the new item on it. If doesn't fit there, we're going\r\n     *     to put it on the first row.\r\n     *\r\n     * @returns Array x and y.\r\n     */\r\n    findPositionForItem(\r\n        item: GridListItem,\r\n        start: { x: number; y: number },\r\n        fixedRow?: number\r\n    ): Array<number> {\r\n        let x, y, position;\r\n\r\n        // Start searching for a position from the horizontal position of the\r\n        // rightmost item from the grid\r\n        for (x = start.x; x < this.grid.length; x++) {\r\n            if (fixedRow !== undefined) {\r\n                position = [x, fixedRow];\r\n\r\n                if (this.itemFitsAtPosition(item, position)) {\r\n                    return position;\r\n                }\r\n            } else {\r\n                for (y = start.y; y < this.options.lanes; y++) {\r\n                    position = [x, y];\r\n\r\n                    if (this.itemFitsAtPosition(item, position)) {\r\n                        return position;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        // If we've reached this point, we need to start a new column\r\n        const newCol = this.grid.length;\r\n        let newRow = 0;\r\n\r\n        if (\r\n            fixedRow !== undefined &&\r\n            this.itemFitsAtPosition(item, [newCol, fixedRow])\r\n        ) {\r\n            newRow = fixedRow;\r\n        }\r\n\r\n        return [newCol, newRow];\r\n    }\r\n\r\n    moveAndResize(\r\n        item: GridListItem,\r\n        newPosition: Array<number>,\r\n        size: { w: number; h: number }\r\n    ) {\r\n        const position = this.getItemPosition({\r\n            x: newPosition[0],\r\n            y: newPosition[1],\r\n            w: item.w,\r\n            h: item.h\r\n        });\r\n        const width = size.w || item.w,\r\n            height = size.h || item.h;\r\n\r\n        this.updateItemPosition(item, [position.x, position.y]);\r\n        this.updateItemSize(item, width, height);\r\n\r\n        this.resolveCollisions(item);\r\n    }\r\n\r\n    moveItemToPosition(item: GridListItem, newPosition: Array<number>) {\r\n        const position = this.getItemPosition({\r\n            x: newPosition[0],\r\n            y: newPosition[1],\r\n            w: item.w,\r\n            h: item.h\r\n        });\r\n\r\n        this.updateItemPosition(item, [position.x, position.y]);\r\n        this.resolveCollisions(item);\r\n    }\r\n\r\n    /**\r\n     * Resize an item and resolve collisions.\r\n     *\r\n     * @param Object item A reference to an item that's part of the grid.\r\n     * @param Object size\r\n     * @param number [size.w=item.w] The new width.\r\n     * @param number [size.h=item.h] The new height.\r\n     */\r\n    resizeItem(item: GridListItem, size: { w: number; h: number }) {\r\n        const width = size.w || item.w,\r\n            height = size.h || item.h;\r\n\r\n        this.updateItemSize(item, width, height);\r\n\r\n        this.pullItemsToLeft(item);\r\n    }\r\n\r\n    /**\r\n     * Compare the current items against a previous snapshot and return only\r\n     * the ones that changed their attributes in the meantime. This includes both\r\n     * position (x, y) and size (w, h)\r\n     *\r\n     * Each item that is returned is not the GridListItem but the helper that holds GridListItem\r\n     * and list of changed properties.\r\n     */\r\n    getChangedItems(\r\n        initialItems: Array<GridListItem>,\r\n        breakpoint?\r\n    ): Array<{\r\n        item: GridListItem;\r\n        changes: Array<string>;\r\n        isNew: boolean;\r\n    }> {\r\n        return this.items\r\n            .map((item: GridListItem) => {\r\n                const changes = [];\r\n                const oldValues: {\r\n                    x?: number;\r\n                    y?: number;\r\n                    w?: number;\r\n                    h?: number;\r\n                } = {};\r\n                const initItem = initialItems.find(\r\n                    initItm => initItm.$element === item.$element\r\n                );\r\n\r\n                if (!initItem) {\r\n                    return { item, changes: ['x', 'y', 'w', 'h'], isNew: true };\r\n                }\r\n\r\n                const oldX = initItem.getValueX(breakpoint);\r\n                if (item.getValueX(breakpoint) !== oldX) {\r\n                    changes.push('x');\r\n                    if (oldX || oldX === 0) {\r\n                        oldValues.x = oldX;\r\n                    }\r\n                }\r\n\r\n                const oldY = initItem.getValueY(breakpoint);\r\n                if (item.getValueY(breakpoint) !== oldY) {\r\n                    changes.push('y');\r\n                    if (oldY || oldY === 0) {\r\n                        oldValues.y = oldY;\r\n                    }\r\n                }\r\n                if (\r\n                    item.getValueW(breakpoint) !==\r\n                    initItem.getValueW(breakpoint)\r\n                ) {\r\n                    changes.push('w');\r\n                    oldValues.w = initItem.w;\r\n                }\r\n                if (\r\n                    item.getValueH(breakpoint) !==\r\n                    initItem.getValueH(breakpoint)\r\n                ) {\r\n                    changes.push('h');\r\n                    oldValues.h = initItem.h;\r\n                }\r\n\r\n                return { item, oldValues, changes, isNew: false };\r\n            })\r\n            .filter(\r\n                (itemChange: {\r\n                    item: GridListItem;\r\n                    changes: Array<string>;\r\n                }) => {\r\n                    return itemChange.changes.length;\r\n                }\r\n            );\r\n    }\r\n\r\n    resolveCollisions(item: GridListItem) {\r\n        if (!this.tryToResolveCollisionsLocally(item)) {\r\n            this.pullItemsToLeft(item);\r\n        }\r\n        if (this.options.floating) {\r\n            this.pullItemsToLeft();\r\n        } else if (this.getItemsCollidingWithItem(item).length) {\r\n            this.pullItemsToLeft();\r\n        }\r\n    }\r\n\r\n    pushCollidingItems(fixedItem?: GridListItem) {\r\n        // Start a fresh grid with the fixed item already placed inside\r\n        this.sortItemsByPosition();\r\n        this.resetGrid();\r\n        this.generateGrid();\r\n\r\n        this.items\r\n            .filter(item => !this.isItemFloating(item) && item !== fixedItem)\r\n            .forEach(item => {\r\n                if (!this.tryToResolveCollisionsLocally(item)) {\r\n                    this.pullItemsToLeft(item);\r\n                }\r\n            });\r\n    }\r\n\r\n    /**\r\n     * Build the grid from scratch, by using the current item positions and\r\n     * pulling them as much to the left as possible, removing as space between\r\n     * them as possible.\r\n     *\r\n     * If a \"fixed item\" is provided, its position will be kept intact and the\r\n     * rest of the items will be layed around it.\r\n     */\r\n    pullItemsToLeft(fixedItem?) {\r\n        if (this.options.direction === 'none') {\r\n            return;\r\n        }\r\n\r\n        // Start a fresh grid with the fixed item already placed inside\r\n        this.sortItemsByPosition();\r\n        this.resetGrid();\r\n\r\n        // Start the grid with the fixed item as the first positioned item\r\n        if (fixedItem) {\r\n            const fixedPosition = this.getItemPosition(fixedItem);\r\n            this.updateItemPosition(fixedItem, [\r\n                fixedPosition.x,\r\n                fixedPosition.y\r\n            ]);\r\n        }\r\n\r\n        this.items\r\n            .filter((item: GridListItem) => {\r\n                return !item.dragAndDrop && item !== fixedItem;\r\n            })\r\n            .forEach((item: GridListItem) => {\r\n                const fixedPosition = this.getItemPosition(item);\r\n                this.updateItemPosition(item, [\r\n                    fixedPosition.x,\r\n                    fixedPosition.y\r\n                ]);\r\n            });\r\n\r\n        for (let i = 0; i < this.items.length; i++) {\r\n            const item = this.items[i],\r\n                position = this.getItemPosition(item);\r\n\r\n            // The fixed item keeps its exact position\r\n            if (\r\n                (fixedItem && item === fixedItem) ||\r\n                !item.dragAndDrop ||\r\n                (!this.options.floating &&\r\n                    this.isItemFloating(item) &&\r\n                    !this.getItemsCollidingWithItem(item).length)\r\n            ) {\r\n                continue;\r\n            }\r\n\r\n            const x = this.findLeftMostPositionForItem(item),\r\n                newPosition = this.findPositionForItem(\r\n                    item,\r\n                    { x: x, y: 0 },\r\n                    position.y\r\n                );\r\n\r\n            this.updateItemPosition(item, newPosition);\r\n        }\r\n    }\r\n\r\n    isOverFixedArea(\r\n        x: number,\r\n        y: number,\r\n        w: number,\r\n        h: number,\r\n        item: GridListItem = null\r\n    ): boolean {\r\n        let itemData = { x, y, w, h };\r\n\r\n        if (this.options.direction !== 'horizontal') {\r\n            itemData = { x: y, y: x, w: h, h: w };\r\n        }\r\n\r\n        for (let i = itemData.x; i < itemData.x + itemData.w; i++) {\r\n            for (let j = itemData.y; j < itemData.y + itemData.h; j++) {\r\n                if (\r\n                    this.grid[i] &&\r\n                    this.grid[i][j] &&\r\n                    this.grid[i][j] !== item &&\r\n                    !this.grid[i][j].dragAndDrop\r\n                ) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    checkItemAboveEmptyArea(\r\n        item: GridListItem,\r\n        newPosition: { x: number; y: number }\r\n    ) {\r\n        let itemData = {\r\n            x: newPosition.x,\r\n            y: newPosition.y,\r\n            w: item.w,\r\n            h: item.h\r\n        };\r\n        if (\r\n            !item.itemPrototype &&\r\n            item.x === newPosition.x &&\r\n            item.y === newPosition.y\r\n        ) {\r\n            return true;\r\n        }\r\n\r\n        if (this.options.direction === 'horizontal') {\r\n            itemData = {\r\n                x: newPosition.y,\r\n                y: newPosition.x,\r\n                w: itemData.h,\r\n                h: itemData.w\r\n            };\r\n        }\r\n        return !this.checkItemsInArea(\r\n            itemData.y,\r\n            itemData.y + itemData.h - 1,\r\n            itemData.x,\r\n            itemData.x + itemData.w - 1,\r\n            item\r\n        );\r\n    }\r\n\r\n    fixItemsPositions(options: IGridsterOptions) {\r\n        // items with x, y that fits gird with size of options.lanes\r\n        const validItems = this.items\r\n            .filter((item: GridListItem) => item.itemComponent)\r\n            .filter((item: GridListItem) =>\r\n                this.isItemValidForGrid(item, options)\r\n            );\r\n        // items that x, y must be generated\r\n        const invalidItems = this.items\r\n            .filter((item: GridListItem) => item.itemComponent)\r\n            .filter(\r\n                (item: GridListItem) => !this.isItemValidForGrid(item, options)\r\n            );\r\n\r\n        const gridList = new GridList([], options);\r\n\r\n        // put items with defined positions to the grid\r\n        gridList.items = validItems.map((item: GridListItem) => {\r\n            return item.copyForBreakpoint(options.breakpoint);\r\n        });\r\n\r\n        gridList.generateGrid();\r\n\r\n        invalidItems.forEach(item => {\r\n            // TODO: check if this change does not broke anything\r\n            // const itemCopy = item.copy();\r\n            const itemCopy = item.copyForBreakpoint(options.breakpoint);\r\n            const position = gridList.findPositionForItem(itemCopy, {\r\n                x: 0,\r\n                y: 0\r\n            });\r\n\r\n            gridList.items.push(itemCopy);\r\n            gridList.setItemPosition(itemCopy, position);\r\n            gridList.markItemPositionToGrid(itemCopy);\r\n        });\r\n\r\n        gridList.pullItemsToLeft();\r\n        gridList.pushCollidingItems();\r\n\r\n        this.items.forEach((itm: GridListItem) => {\r\n            const cachedItem = gridList.items.filter(cachedItm => {\r\n                return cachedItm.$element === itm.$element;\r\n            })[0];\r\n\r\n            itm.setValueX(cachedItem.x, options.breakpoint);\r\n            itm.setValueY(cachedItem.y, options.breakpoint);\r\n            itm.setValueW(cachedItem.w, options.breakpoint);\r\n            itm.setValueH(cachedItem.h, options.breakpoint);\r\n            itm.autoSize = cachedItem.autoSize;\r\n        });\r\n    }\r\n\r\n    deleteItemPositionFromGrid(item: GridListItem) {\r\n        const position = this.getItemPosition(item);\r\n        let x, y;\r\n\r\n        for (x = position.x; x < position.x + position.w; x++) {\r\n            // It can happen to try to remove an item from a position not generated\r\n            // in the grid, probably when loading a persisted grid of items. No need\r\n            // to create a column to be able to remove something from it, though\r\n            if (!this.grid[x]) {\r\n                continue;\r\n            }\r\n\r\n            for (y = position.y; y < position.y + position.h; y++) {\r\n                // Don't clear the cell if it's been occupied by a different widget in\r\n                // the meantime (e.g. when an item has been moved over this one, and\r\n                // thus by continuing to clear this item's previous position you would\r\n                // cancel the first item's move, leaving it without any position even)\r\n                if (this.grid[x][y] === item) {\r\n                    this.grid[x][y] = null;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private isItemFloating(item) {\r\n        if (item.itemComponent && item.itemComponent.isDragging) {\r\n            return false;\r\n        }\r\n        const position = this.getItemPosition(item);\r\n\r\n        if (position.x === 0) {\r\n            return false;\r\n        }\r\n        const rowBelowItem = this.grid[position.x - 1];\r\n\r\n        return (rowBelowItem || [])\r\n            .slice(position.y, position.y + position.h)\r\n            .reduce((isFloating, cellItem) => {\r\n                return isFloating && !cellItem;\r\n            }, true);\r\n    }\r\n\r\n    private isItemValidForGrid(item: GridListItem, options: IGridsterOptions) {\r\n        const itemData =\r\n            options.direction === 'horizontal'\r\n                ? {\r\n                      x: item.getValueY(options.breakpoint),\r\n                      y: item.getValueX(options.breakpoint),\r\n                      w: item.getValueH(options.breakpoint),\r\n                      h: Math.min(\r\n                          item.getValueW(this.options.breakpoint),\r\n                          options.lanes\r\n                      )\r\n                  }\r\n                : {\r\n                      x: item.getValueX(options.breakpoint),\r\n                      y: item.getValueY(options.breakpoint),\r\n                      w: Math.min(\r\n                          item.getValueW(this.options.breakpoint),\r\n                          options.lanes\r\n                      ),\r\n                      h: item.getValueH(options.breakpoint)\r\n                  };\r\n\r\n        return (\r\n            typeof itemData.x === 'number' &&\r\n            typeof itemData.y === 'number' &&\r\n            itemData.x + itemData.w <= options.lanes\r\n        );\r\n    }\r\n\r\n    private findDefaultPositionHorizontal(width: number, height: number) {\r\n        for (const col of this.grid) {\r\n            const colIdx = this.grid.indexOf(col);\r\n            let rowIdx = 0;\r\n            while (rowIdx < col.length - height + 1) {\r\n                if (\r\n                    !this.checkItemsInArea(\r\n                        colIdx,\r\n                        colIdx + width - 1,\r\n                        rowIdx,\r\n                        rowIdx + height - 1\r\n                    )\r\n                ) {\r\n                    return [colIdx, rowIdx];\r\n                }\r\n                rowIdx++;\r\n            }\r\n        }\r\n        return [this.grid.length, 0];\r\n    }\r\n\r\n    private findDefaultPositionVertical(width: number, height: number) {\r\n        for (const row of this.grid) {\r\n            const rowIdx = this.grid.indexOf(row);\r\n            let colIdx = 0;\r\n            while (colIdx < row.length - width + 1) {\r\n                if (\r\n                    !this.checkItemsInArea(\r\n                        rowIdx,\r\n                        rowIdx + height - 1,\r\n                        colIdx,\r\n                        colIdx + width - 1\r\n                    )\r\n                ) {\r\n                    return [colIdx, rowIdx];\r\n                }\r\n                colIdx++;\r\n            }\r\n        }\r\n        return [0, this.grid.length];\r\n    }\r\n\r\n    private checkItemsInArea(\r\n        rowStart: number,\r\n        rowEnd: number,\r\n        colStart: number,\r\n        colEnd: number,\r\n        item?: GridListItem\r\n    ) {\r\n        for (let i = rowStart; i <= rowEnd; i++) {\r\n            for (let j = colStart; j <= colEnd; j++) {\r\n                if (\r\n                    this.grid[i] &&\r\n                    this.grid[i][j] &&\r\n                    (item ? this.grid[i][j] !== item : true)\r\n                ) {\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private sortItemsByPosition() {\r\n        this.items.sort((item1, item2) => {\r\n            const position1 = this.getItemPosition(item1),\r\n                position2 = this.getItemPosition(item2);\r\n\r\n            // Try to preserve columns.\r\n            if (position1.x !== position2.x) {\r\n                return position1.x - position2.x;\r\n            }\r\n\r\n            if (position1.y !== position2.y) {\r\n                return position1.y - position2.y;\r\n            }\r\n\r\n            // The items are placed on the same position.\r\n            return 0;\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Some items can have 100% height or 100% width. Those dimmensions are\r\n     * expressed as 0. We need to ensure a valid width and height for each of\r\n     * those items as the number of items per lane.\r\n     */\r\n    private adjustSizeOfItems() {\r\n        for (let i = 0; i < this.items.length; i++) {\r\n            const item = this.items[i];\r\n\r\n            // This can happen only the first time items are checked.\r\n            // We need the property to have a value for all the items so that the\r\n            // `cloneItems` method will merge the properties properly. If we only set\r\n            // it to the items that need it then the following can happen:\r\n            //\r\n            // cloneItems([{id: 1, autoSize: true}, {id: 2}],\r\n            //            [{id: 2}, {id: 1, autoSize: true}]);\r\n            //\r\n            // will result in\r\n            //\r\n            // [{id: 1, autoSize: true}, {id: 2, autoSize: true}]\r\n            if (item.autoSize === undefined) {\r\n                item.autoSize = item.w === 0 || item.h === 0;\r\n            }\r\n\r\n            if (item.autoSize) {\r\n                if (this.options.direction === 'horizontal') {\r\n                    item.h = this.options.lanes;\r\n                } else {\r\n                    item.w = this.options.lanes;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    private resetGrid() {\r\n        this.grid = [];\r\n    }\r\n\r\n    /**\r\n     * Check that an item wouldn't overlap with another one if placed at a\r\n     * certain position within the grid\r\n     */\r\n    private itemFitsAtPosition(item: GridListItem, newPosition) {\r\n        const position = this.getItemPosition(item);\r\n        let x, y;\r\n\r\n        // No coordonate can be negative\r\n        if (newPosition[0] < 0 || newPosition[1] < 0) {\r\n            return false;\r\n        }\r\n\r\n        // Make sure the item isn't larger than the entire grid\r\n        if (\r\n            newPosition[1] + Math.min(position.h, this.options.lanes) >\r\n            this.options.lanes\r\n        ) {\r\n            return false;\r\n        }\r\n\r\n        if (this.isOverFixedArea(item.x, item.y, item.w, item.h)) {\r\n            return false;\r\n        }\r\n\r\n        // Make sure the position doesn't overlap with an already positioned\r\n        // item.\r\n        for (x = newPosition[0]; x < newPosition[0] + position.w; x++) {\r\n            const col = this.grid[x];\r\n            // Surely a column that hasn't even been created yet is available\r\n            if (!col) {\r\n                continue;\r\n            }\r\n\r\n            for (y = newPosition[1]; y < newPosition[1] + position.h; y++) {\r\n                // Any space occupied by an item can continue to be occupied by the\r\n                // same item.\r\n                if (col[y] && col[y] !== item) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    private updateItemPosition(item: GridListItem, position: Array<any>) {\r\n        if (item.x !== null && item.y !== null) {\r\n            this.deleteItemPositionFromGrid(item);\r\n        }\r\n\r\n        this.setItemPosition(item, position);\r\n\r\n        this.markItemPositionToGrid(item);\r\n    }\r\n\r\n    /**\r\n     * @param Object item A reference to a grid item.\r\n     * @param number width The new width.\r\n     * @param number height The new height.\r\n     */\r\n    private updateItemSize(item: GridListItem, width, height) {\r\n        if (item.x !== null && item.y !== null) {\r\n            this.deleteItemPositionFromGrid(item);\r\n        }\r\n\r\n        item.w = width;\r\n        item.h = height;\r\n\r\n        this.markItemPositionToGrid(item);\r\n    }\r\n\r\n    /**\r\n     * Mark the grid cells that are occupied by an item. This prevents items\r\n     * from overlapping in the grid\r\n     */\r\n    private markItemPositionToGrid(item: GridListItem) {\r\n        const position = this.getItemPosition(item);\r\n        let x, y;\r\n\r\n        // Ensure that the grid has enough columns to accomodate the current item.\r\n        this.ensureColumns(position.x + position.w);\r\n\r\n        for (x = position.x; x < position.x + position.w; x++) {\r\n            for (y = position.y; y < position.y + position.h; y++) {\r\n                this.grid[x][y] = item;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Ensure that the grid has at least N columns available.\r\n     */\r\n    private ensureColumns(N) {\r\n        for (let i = 0; i < N; i++) {\r\n            if (!this.grid[i]) {\r\n                this.grid.push(new GridCol(this.options.lanes));\r\n            }\r\n        }\r\n    }\r\n\r\n    private getItemsCollidingWithItem(item: GridListItem): number[] {\r\n        const collidingItems = [];\r\n        for (let i = 0; i < this.items.length; i++) {\r\n            if (\r\n                item !== this.items[i] &&\r\n                this.itemsAreColliding(item, this.items[i])\r\n            ) {\r\n                collidingItems.push(i);\r\n            }\r\n        }\r\n        return collidingItems;\r\n    }\r\n\r\n    private itemsAreColliding(item1: GridListItem, item2: GridListItem) {\r\n        const position1 = this.getItemPosition(item1),\r\n            position2 = this.getItemPosition(item2);\r\n\r\n        return !(\r\n            position2.x >= position1.x + position1.w ||\r\n            position2.x + position2.w <= position1.x ||\r\n            position2.y >= position1.y + position1.h ||\r\n            position2.y + position2.h <= position1.y\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Attempt to resolve the collisions after moving an item over one or more\r\n     * other items within the grid, by shifting the position of the colliding\r\n     * items around the moving one. This might result in subsequent collisions,\r\n     * in which case we will revert all position permutations. To be able to\r\n     * revert to the initial item positions, we create a virtual grid in the\r\n     * process\r\n     */\r\n    private tryToResolveCollisionsLocally(item: GridListItem) {\r\n        const collidingItems = this.getItemsCollidingWithItem(item);\r\n        if (!collidingItems.length) {\r\n            return true;\r\n        }\r\n\r\n        const _gridList = new GridList(\r\n            this.items.map(itm => {\r\n                return itm.copy();\r\n            }),\r\n            this.options\r\n        );\r\n\r\n        let leftOfItem;\r\n        let rightOfItem;\r\n        let aboveOfItem;\r\n        let belowOfItem;\r\n\r\n        for (let i = 0; i < collidingItems.length; i++) {\r\n            const collidingItem = _gridList.items[collidingItems[i]],\r\n                collidingPosition = this.getItemPosition(collidingItem);\r\n\r\n            // We use a simple algorithm for moving items around when collisions occur:\r\n            // In this prioritized order, we try to move a colliding item around the\r\n            // moving one:\r\n            // 1. to its left side\r\n            // 2. above it\r\n            // 3. under it\r\n            // 4. to its right side\r\n            const position = this.getItemPosition(item);\r\n\r\n            leftOfItem = [\r\n                position.x - collidingPosition.w,\r\n                collidingPosition.y\r\n            ];\r\n            rightOfItem = [position.x + position.w, collidingPosition.y];\r\n            aboveOfItem = [\r\n                collidingPosition.x,\r\n                position.y - collidingPosition.h\r\n            ];\r\n            belowOfItem = [collidingPosition.x, position.y + position.h];\r\n\r\n            if (_gridList.itemFitsAtPosition(collidingItem, leftOfItem)) {\r\n                _gridList.updateItemPosition(collidingItem, leftOfItem);\r\n            } else if (\r\n                _gridList.itemFitsAtPosition(collidingItem, aboveOfItem)\r\n            ) {\r\n                _gridList.updateItemPosition(collidingItem, aboveOfItem);\r\n            } else if (\r\n                _gridList.itemFitsAtPosition(collidingItem, belowOfItem)\r\n            ) {\r\n                _gridList.updateItemPosition(collidingItem, belowOfItem);\r\n            } else if (\r\n                _gridList.itemFitsAtPosition(collidingItem, rightOfItem)\r\n            ) {\r\n                _gridList.updateItemPosition(collidingItem, rightOfItem);\r\n            } else {\r\n                // Collisions failed, we must use the pullItemsToLeft method to arrange\r\n                // the other items around this item with fixed position. This is our\r\n                // plan B for when local collision resolving fails.\r\n                return false;\r\n            }\r\n        }\r\n        // If we reached this point it means we managed to resolve the collisions\r\n        // from one single iteration, just by moving the colliding items around. So\r\n        // we accept this scenario and merge the branched-out grid instance into the\r\n        // original one\r\n\r\n        this.items.forEach((itm: GridListItem, idx: number) => {\r\n            const cachedItem = _gridList.items.filter(cachedItm => {\r\n                return cachedItm.$element === itm.$element;\r\n            })[0];\r\n\r\n            itm.x = cachedItem.x;\r\n            itm.y = cachedItem.y;\r\n            itm.w = cachedItem.w;\r\n            itm.h = cachedItem.h;\r\n            itm.autoSize = cachedItem.autoSize;\r\n        });\r\n        this.generateGrid();\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * When pulling items to the left, we need to find the leftmost position for\r\n     * an item, with two considerations in mind:\r\n     * - preserving its current row\r\n     * - preserving the previous horizontal order between items\r\n     */\r\n    private findLeftMostPositionForItem(item) {\r\n        let tail = 0;\r\n        const position = this.getItemPosition(item);\r\n\r\n        for (let i = 0; i < this.grid.length; i++) {\r\n            for (let j = position.y; j < position.y + position.h; j++) {\r\n                const otherItem = this.grid[i][j];\r\n\r\n                if (!otherItem) {\r\n                    continue;\r\n                }\r\n\r\n                const otherPosition = this.getItemPosition(otherItem);\r\n\r\n                if (this.items.indexOf(otherItem) < this.items.indexOf(item)) {\r\n                    tail = otherPosition.x + otherPosition.w;\r\n                }\r\n            }\r\n        }\r\n\r\n        return tail;\r\n    }\r\n\r\n    private findItemByPosition(x: number, y: number): GridListItem {\r\n        for (let i = 0; i < this.items.length; i++) {\r\n            if (this.items[i].x === x && this.items[i].y === y) {\r\n                return this.items[i];\r\n            }\r\n        }\r\n    }\r\n\r\n    private getItemByAttribute(key, value) {\r\n        for (let i = 0; i < this.items.length; i++) {\r\n            if (this.items[i][key] === value) {\r\n                return this.items[i];\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n\r\n    private padNumber(nr, prefix) {\r\n        // Currently works for 2-digit numbers (<100)\r\n        return nr >= 10 ? nr : prefix + nr;\r\n    }\r\n\r\n    /**\r\n     * If the direction is vertical we need to rotate the grid 90 deg to the\r\n     * left. Thus, we simulate the fact that items are being pulled to the top.\r\n     *\r\n     * Since the items have widths and heights, if we apply the classic\r\n     * counter-clockwise 90 deg rotation\r\n     *\r\n     *     [0 -1]\r\n     *     [1  0]\r\n     *\r\n     * then the top left point of an item will become the bottom left point of\r\n     * the rotated item. To adjust for this, we need to subtract from the y\r\n     * position the height of the original item - the width of the rotated item.\r\n     *\r\n     * However, if we do this then we'll reverse some actions: resizing the\r\n     * width of an item will stretch the item to the left instead of to the\r\n     * right; resizing an item that doesn't fit into the grid will push the\r\n     * items around it instead of going on a new row, etc.\r\n     *\r\n     * We found it better to do a vertical flip of the grid after rotating it.\r\n     * This restores the direction of the actions and greatly simplifies the\r\n     * transformations.\r\n     */\r\n    private getItemPosition(item: any) {\r\n        if (this.options.direction === 'horizontal') {\r\n            return item;\r\n        } else {\r\n            return {\r\n                x: item.y,\r\n                y: item.x,\r\n                w: item.h,\r\n                h: item.w\r\n            };\r\n        }\r\n    }\r\n\r\n    /**\r\n     * See getItemPosition.\r\n     */\r\n    private setItemPosition(item, position) {\r\n        if (this.options.direction === 'horizontal') {\r\n            item.x = position[0];\r\n            item.y = position[1];\r\n        } else {\r\n            // We're supposed to subtract the rotated item's height which is actually\r\n            // the non-rotated item's width.\r\n            item.x = position[1];\r\n            item.y = position[0];\r\n        }\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Subject } from 'rxjs';\r\nimport { debounceTime } from 'rxjs/operators';\r\n\r\nimport { GridList } from './gridList/gridList';\r\nimport { IGridsterOptions } from './IGridsterOptions';\r\nimport { IGridsterDraggableOptions } from './IGridsterDraggableOptions';\r\nimport { GridListItem } from './gridList/GridListItem';\r\nimport { GridsterComponent } from './gridster.component';\r\nimport { GridsterOptions } from './GridsterOptions';\r\n\r\n@Injectable()\r\nexport class GridsterService {\r\n    $element: HTMLElement;\r\n\r\n    gridList: GridList;\r\n\r\n    items: Array<GridListItem> = [];\r\n    _items: Array<GridListItem> = [];\r\n    _itemsMap: { [breakpoint: string]: Array<GridListItem> } = {};\r\n    disabledItems: Array<GridListItem> = [];\r\n\r\n    options: IGridsterOptions;\r\n    draggableOptions: IGridsterDraggableOptions;\r\n\r\n    gridsterRect: ClientRect;\r\n    gridsterScrollData: { scrollTop: number, scrollLeft: number };\r\n\r\n    gridsterOptions: GridsterOptions;\r\n\r\n    gridsterComponent: GridsterComponent;\r\n\r\n    debounceRenderSubject = new Subject();\r\n\r\n    public $positionHighlight: HTMLElement;\r\n\r\n    public maxItemWidth: number;\r\n    public maxItemHeight: number;\r\n\r\n    public cellWidth: number;\r\n    public cellHeight: number;\r\n\r\n    public itemRemoveSubject: Subject<GridListItem> = new Subject();\r\n\r\n    private _fontSize: number;\r\n\r\n    private previousDragPosition: Array<number>;\r\n    private previousDragSize: Array<number>;\r\n\r\n    private currentElement: HTMLElement;\r\n\r\n    private _maxGridCols: number;\r\n\r\n    private isInit = false;\r\n\r\n    constructor() {\r\n        this.itemRemoveSubject.pipe(debounceTime(0)).subscribe(() => {\r\n            this.gridList.pullItemsToLeft();\r\n            this.render();\r\n            this.updateCachedItems();\r\n        });\r\n\r\n        this.debounceRenderSubject.pipe(debounceTime(0)).subscribe(() => this.render());\r\n    }\r\n\r\n    isInitialized(): boolean {\r\n        return this.isInit;\r\n    }\r\n\r\n    /**\r\n     * Must be called before init\r\n     * @param item\r\n     */\r\n    registerItem(item: GridListItem) {\r\n\r\n        this.items.push(item);\r\n        return item;\r\n    }\r\n\r\n    init(gridsterComponent: GridsterComponent) {\r\n\r\n        this.gridsterComponent = gridsterComponent;\r\n\r\n        this.draggableOptions = gridsterComponent.draggableOptions;\r\n\r\n        this.gridsterOptions = gridsterComponent.gridsterOptions;\r\n    }\r\n\r\n    start() {\r\n        this.updateMaxItemSize();\r\n\r\n        // Used to highlight a position an element will land on upon drop\r\n        if (this.$positionHighlight) {\r\n            this.removePositionHighlight();\r\n        }\r\n\r\n        this.initGridList();\r\n\r\n        this.isInit = true;\r\n\r\n        setTimeout(() => {\r\n            this.copyItems();\r\n            this.fixItemsPositions();\r\n\r\n            this.gridsterComponent.reflowGridster(true);\r\n            this.gridsterComponent.setReady();\r\n        });\r\n    }\r\n\r\n    initGridList() {\r\n        // Create instance of GridList (decoupled lib for handling the grid\r\n        // positioning and sorting post-drag and dropping)\r\n        this.gridList = new GridList(this.items, this.options);\r\n    }\r\n\r\n    render() {\r\n        this.updateMaxItemSize();\r\n        this.gridList.generateGrid();\r\n        this.applySizeToItems();\r\n        this.applyPositionToItems();\r\n        this.refreshLines();\r\n    }\r\n\r\n    reflow() {\r\n        this.calculateCellSize();\r\n        this.render();\r\n    }\r\n\r\n    fixItemsPositions() {\r\n        if (this.options.responsiveSizes) {\r\n            this.gridList.fixItemsPositions(this.options);\r\n        } else {\r\n            this.gridList.fixItemsPositions(this.gridsterOptions.basicOptions);\r\n            this.gridsterOptions.responsiveOptions.forEach((options: IGridsterOptions) => {\r\n                this.gridList.fixItemsPositions(options);\r\n            });\r\n        }\r\n\r\n        this.updateCachedItems();\r\n    }\r\n\r\n    removeItem(item: GridListItem) {\r\n        const idx = this.items.indexOf(item);\r\n\r\n        if (idx >= 0) {\r\n            this.items.splice(this.items.indexOf(item), 1);\r\n        }\r\n\r\n        this.gridList.deleteItemPositionFromGrid(item);\r\n        this.removeItemFromCache(item);\r\n    }\r\n\r\n    onResizeStart(item: GridListItem) {\r\n        this.currentElement = item.$element;\r\n\r\n        this.copyItems();\r\n\r\n        this._maxGridCols = this.gridList.grid.length;\r\n\r\n        this.highlightPositionForItem(item);\r\n\r\n        this.gridsterComponent.isResizing = true;\r\n\r\n        this.refreshLines();\r\n    }\r\n\r\n    onResizeDrag(item: GridListItem) {\r\n        const newSize = this.snapItemSizeToGrid(item);\r\n        const sizeChanged = this.dragSizeChanged(newSize);\r\n        const newPosition = this.snapItemPositionToGrid(item);\r\n        const positionChanged = this.dragPositionChanged(newPosition);\r\n\r\n        if (sizeChanged || positionChanged) {\r\n            // Regenerate the grid with the positions from when the drag started\r\n            this.restoreCachedItems();\r\n            this.gridList.generateGrid();\r\n\r\n            this.previousDragPosition = newPosition;\r\n            this.previousDragSize = newSize;\r\n\r\n            this.gridList.moveAndResize(item, newPosition, {w: newSize[0], h: newSize[1]});\r\n\r\n            // Visually update item positions and highlight shape\r\n            this.applyPositionToItems(true);\r\n            this.highlightPositionForItem(item);\r\n        }\r\n    }\r\n\r\n    onResizeStop(item: GridListItem) {\r\n        this.currentElement = undefined;\r\n        this.updateCachedItems();\r\n        this.previousDragSize = null;\r\n\r\n        this.removePositionHighlight();\r\n\r\n        this.gridsterComponent.isResizing = false;\r\n\r\n        this.gridList.pullItemsToLeft(item);\r\n        this.debounceRenderSubject.next();\r\n\r\n        this.fixItemsPositions();\r\n    }\r\n\r\n    onStart(item: GridListItem) {\r\n        this.currentElement = item.$element;\r\n        // itemCtrl.isDragging = true;\r\n        // Create a deep copy of the items; we use them to revert the item\r\n        // positions after each drag change, making an entire drag operation less\r\n        // distructable\r\n        this.copyItems();\r\n\r\n        // Since dragging actually alters the grid, we need to establish the number\r\n        // of cols (+1 extra) before the drag starts\r\n\r\n        this._maxGridCols = this.gridList.grid.length;\r\n\r\n        this.gridsterComponent.isDragging = true;\r\n        this.gridsterComponent.updateGridsterElementData();\r\n\r\n        this.refreshLines();\r\n    }\r\n\r\n    onDrag(item: GridListItem) {\r\n        const newPosition = this.snapItemPositionToGrid(item);\r\n\r\n        if (this.dragPositionChanged(newPosition)) {\r\n\r\n            // Regenerate the grid with the positions from when the drag started\r\n            this.restoreCachedItems();\r\n            this.gridList.generateGrid();\r\n\r\n            this.previousDragPosition = newPosition;\r\n            if (this.options.direction === 'none' &&\r\n                !this.gridList.checkItemAboveEmptyArea(item, {x: newPosition[0], y: newPosition[1]})) {\r\n                return;\r\n            }\r\n\r\n            // Since the items list is a deep copy, we need to fetch the item\r\n            // corresponding to this drag action again\r\n            this.gridList.moveItemToPosition(item, newPosition);\r\n\r\n            // Visually update item positions and highlight shape\r\n            this.applyPositionToItems(true);\r\n            this.highlightPositionForItem(item);\r\n        }\r\n    }\r\n\r\n    cancel() {\r\n        this.restoreCachedItems();\r\n        this.previousDragPosition = null;\r\n        this.updateMaxItemSize();\r\n        this.applyPositionToItems();\r\n        this.removePositionHighlight();\r\n        this.currentElement = undefined;\r\n        this.gridsterComponent.isDragging = false;\r\n    }\r\n\r\n    onDragOut (item: GridListItem) {\r\n\r\n        this.cancel();\r\n\r\n        const idx = this.items.indexOf(item);\r\n        if (idx >= 0) {\r\n            this.items.splice(idx, 1);\r\n        }\r\n\r\n        this.gridList.pullItemsToLeft();\r\n        this.render();\r\n    }\r\n\r\n    onStop(item: GridListItem) {\r\n        this.currentElement = undefined;\r\n        this.updateCachedItems();\r\n        this.previousDragPosition = null;\r\n\r\n        this.removePositionHighlight();\r\n\r\n        this.gridList.pullItemsToLeft(item);\r\n\r\n        this.gridsterComponent.isDragging = false;\r\n\r\n        this.refreshLines();\r\n    }\r\n\r\n    calculateCellSize() {\r\n        if (this.options.direction === 'horizontal') {\r\n            this.cellHeight = this.calculateCellHeight();\r\n            this.cellWidth = this.options.cellWidth || this.cellHeight * this.options.widthHeightRatio;\r\n        } else {\r\n            this.cellWidth = this.calculateCellWidth();\r\n            this.cellHeight = this.options.cellHeight || this.cellWidth / this.options.widthHeightRatio;\r\n        }\r\n        if (this.options.heightToFontSizeRatio) {\r\n            this._fontSize = this.cellHeight * this.options.heightToFontSizeRatio;\r\n        }\r\n    }\r\n\r\n    applyPositionToItems(increaseGridsterSize?) {\r\n        if (!this.options.shrink) {\r\n            increaseGridsterSize = true;\r\n        }\r\n        // TODO: Implement group separators\r\n        for (let i = 0; i < this.items.length; i++) {\r\n            // Don't interfere with the positions of the dragged items\r\n            if (this.isCurrentElement(this.items[i].$element)) {\r\n                continue;\r\n            }\r\n            this.items[i].applyPosition(this);\r\n        }\r\n\r\n        const child = <HTMLElement>this.gridsterComponent.$element.firstChild;\r\n        // Update the width of the entire grid container with enough room on the\r\n        // right to allow dragging items to the end of the grid.\r\n        if (this.options.direction === 'horizontal') {\r\n            const increaseWidthWith = (increaseGridsterSize) ? this.maxItemWidth : 0;\r\n            child.style.height = '';\r\n            child.style.width = ((this.gridList.grid.length + increaseWidthWith) * this.cellWidth) + 'px';\r\n\r\n        } else if (this.gridList.grid.length) {\r\n            const increaseHeightWith = (increaseGridsterSize) ? this.maxItemHeight : 0;\r\n            child.style.height = ((this.gridList.grid.length + increaseHeightWith) * this.cellHeight) + 'px';\r\n            child.style.width = '';\r\n        }\r\n    }\r\n\r\n    refreshLines() {\r\n        const gridsterContainer = <HTMLElement>this.gridsterComponent.$element.firstChild;\r\n\r\n        if (this.options.lines && this.options.lines.visible &&\r\n            (this.gridsterComponent.isDragging || this.gridsterComponent.isResizing || this.options.lines.always)) {\r\n            const linesColor = this.options.lines.color || '#d8d8d8';\r\n            const linesBgColor = this.options.lines.backgroundColor || 'transparent';\r\n            const linesWidth = this.options.lines.width || 1;\r\n            const bgPosition = linesWidth / 2;\r\n\r\n            gridsterContainer.style.backgroundSize = `${this.cellWidth}px ${this.cellHeight}px`;\r\n            gridsterContainer.style.backgroundPosition = `-${bgPosition}px -${bgPosition}px`;\r\n            gridsterContainer.style.backgroundImage = `\r\n                linear-gradient(to right, ${linesColor} ${linesWidth}px, ${linesBgColor} ${linesWidth}px),\r\n                linear-gradient(to bottom, ${linesColor} ${linesWidth}px, ${linesBgColor} ${linesWidth}px)\r\n            `;\r\n        } else {\r\n            gridsterContainer.style.backgroundSize = '';\r\n            gridsterContainer.style.backgroundPosition = '';\r\n            gridsterContainer.style.backgroundImage = '';\r\n        }\r\n    }\r\n\r\n    private removeItemFromCache(item: GridListItem) {\r\n        this._items = this._items\r\n            .filter(cachedItem => cachedItem.$element !== item.$element);\r\n\r\n        Object.keys(this._itemsMap)\r\n            .forEach((breakpoint: string) => {\r\n                this._itemsMap[breakpoint] = this._itemsMap[breakpoint]\r\n                    .filter(cachedItem => cachedItem.$element !== item.$element);\r\n            });\r\n    }\r\n\r\n    private copyItems(): void {\r\n        this._items = this.items\r\n            .filter(item => this.isValidGridItem(item))\r\n            .map((item: GridListItem) => {\r\n                return item.copyForBreakpoint(null);\r\n            });\r\n\r\n        this.gridsterOptions.responsiveOptions.forEach((options: IGridsterOptions) => {\r\n            this._itemsMap[options.breakpoint] = this.items\r\n                .filter(item => this.isValidGridItem(item))\r\n                .map((item: GridListItem) => {\r\n                    return item.copyForBreakpoint(options.breakpoint);\r\n                });\r\n        });\r\n    }\r\n\r\n    /**\r\n     * Update maxItemWidth and maxItemHeight vales according to current state of items\r\n     */\r\n    private updateMaxItemSize() {\r\n        this.maxItemWidth = Math.max.apply(\r\n            null, this.items.map((item) => {\r\n                return item.w;\r\n            }));\r\n        this.maxItemHeight = Math.max.apply(\r\n            null, this.items.map((item) => {\r\n                return item.h;\r\n            }));\r\n    }\r\n\r\n    /**\r\n     * Update items properties of previously cached items\r\n     */\r\n    private restoreCachedItems() {\r\n        const items = this.options.breakpoint ? this._itemsMap[this.options.breakpoint] : this._items;\r\n\r\n        this.items\r\n            .filter(item => this.isValidGridItem(item))\r\n            .forEach((item: GridListItem) => {\r\n                const cachedItem: GridListItem = items.filter(cachedItm => {\r\n                    return cachedItm.$element === item.$element;\r\n                })[0];\r\n\r\n                item.x = cachedItem.x;\r\n                item.y = cachedItem.y;\r\n\r\n                item.w = cachedItem.w;\r\n                item.h = cachedItem.h;\r\n                item.autoSize = cachedItem.autoSize;\r\n            });\r\n    }\r\n\r\n    /**\r\n     * If item should react on grid\r\n     * @param GridListItem item\r\n     * @returns boolean\r\n     */\r\n    private isValidGridItem(item: GridListItem): boolean {\r\n        if (this.options.direction === 'none') {\r\n            return !!item.itemComponent;\r\n        }\r\n        return true;\r\n    }\r\n\r\n    private calculateCellWidth() {\r\n        const gridsterWidth = parseFloat(window.getComputedStyle(this.gridsterComponent.$element).width);\r\n\r\n        return gridsterWidth / this.options.lanes;\r\n    }\r\n\r\n    private calculateCellHeight() {\r\n        const gridsterHeight = parseFloat(window.getComputedStyle(this.gridsterComponent.$element).height);\r\n\r\n        return gridsterHeight / this.options.lanes;\r\n    }\r\n\r\n    private applySizeToItems() {\r\n        for (let i = 0; i < this.items.length; i++) {\r\n            this.items[i].applySize();\r\n\r\n            if (this.options.heightToFontSizeRatio) {\r\n                this.items[i].$element.style['font-size'] = this._fontSize;\r\n            }\r\n        }\r\n    }\r\n\r\n    private isCurrentElement(element) {\r\n        if (!this.currentElement) {\r\n            return false;\r\n        }\r\n        return element === this.currentElement;\r\n    }\r\n\r\n    private snapItemSizeToGrid(item: GridListItem): Array<number> {\r\n        const itemSize = {\r\n            width: parseInt(item.$element.style.width, 10) - 1,\r\n            height: parseInt(item.$element.style.height, 10) - 1\r\n        };\r\n\r\n        let colSize = Math.round(itemSize.width / this.cellWidth);\r\n        let rowSize = Math.round(itemSize.height / this.cellHeight);\r\n\r\n        // Keep item minimum 1\r\n        colSize = Math.max(colSize, 1);\r\n        rowSize = Math.max(rowSize, 1);\r\n\r\n        // check if element is pinned\r\n        if (this.gridList.isOverFixedArea(item.x, item.y, colSize, rowSize, item)) {\r\n            return [item.w, item.h];\r\n        }\r\n\r\n        return [colSize, rowSize];\r\n    }\r\n\r\n    private generateItemPosition(item: GridListItem): { x: number, y: number } {\r\n        let position;\r\n\r\n        if (item.itemPrototype) {\r\n            const coords = item.itemPrototype.getPositionToGridster(this);\r\n            position = {\r\n                x: Math.round(coords.x / this.cellWidth),\r\n                y: Math.round(coords.y / this.cellHeight)\r\n            };\r\n        } else {\r\n            position = {\r\n                x: Math.round(item.positionX / this.cellWidth),\r\n                y: Math.round(item.positionY / this.cellHeight)\r\n            };\r\n        }\r\n\r\n        return position;\r\n    }\r\n\r\n    private snapItemPositionToGrid(item: GridListItem) {\r\n        const position = this.generateItemPosition(item);\r\n        let col = position.x;\r\n        let row = position.y;\r\n\r\n        // Keep item position within the grid and don't let the item create more\r\n        // than one extra column\r\n        col = Math.max(col, 0);\r\n        row = Math.max(row, 0);\r\n\r\n        if (this.options.direction === 'horizontal') {\r\n            col = Math.min(col, this._maxGridCols);\r\n        } else {\r\n            col = Math.min(col, Math.max(0, this.options.lanes - item.w));\r\n        }\r\n\r\n        // check if element is pinned\r\n        if (this.gridList.isOverFixedArea(col, row, item.w, item.h)) {\r\n            return [item.x, item.y];\r\n        }\r\n\r\n        return [col, row];\r\n    }\r\n\r\n    private dragSizeChanged(newSize): boolean {\r\n        if (!this.previousDragSize) {\r\n            return true;\r\n        }\r\n        return (newSize[0] !== this.previousDragSize[0] ||\r\n            newSize[1] !== this.previousDragSize[1]);\r\n    }\r\n\r\n    private dragPositionChanged(newPosition): boolean {\r\n        if (!this.previousDragPosition) {\r\n            return true;\r\n        }\r\n        return (newPosition[0] !== this.previousDragPosition[0] ||\r\n            newPosition[1] !== this.previousDragPosition[1]);\r\n    }\r\n\r\n    private highlightPositionForItem(item) {\r\n        const size = item.calculateSize(this);\r\n        const position = item.calculatePosition(this);\r\n\r\n        this.$positionHighlight.style.width = size.width + 'px';\r\n        this.$positionHighlight.style.height = size.height + 'px';\r\n        this.$positionHighlight.style.left = position.left + 'px';\r\n        this.$positionHighlight.style.top = position.top + 'px';\r\n        this.$positionHighlight.style.display = '';\r\n\r\n        if (this.options.heightToFontSizeRatio) {\r\n            this.$positionHighlight.style['font-size'] = this._fontSize;\r\n        }\r\n    }\r\n\r\n    public updateCachedItems() {\r\n        // Notify the user with the items that changed since the previous snapshot\r\n        this.triggerOnChange(null);\r\n        this.gridsterOptions.responsiveOptions.forEach((options: IGridsterOptions) => {\r\n            this.triggerOnChange(options.breakpoint);\r\n        });\r\n\r\n        this.copyItems();\r\n    }\r\n\r\n    private triggerOnChange(breakpoint?) {\r\n        const items = breakpoint ? this._itemsMap[breakpoint] : this._items;\r\n        const changeItems = this.gridList.getChangedItems(items || [], breakpoint);\r\n\r\n        changeItems\r\n            .filter((itemChange: any) => {\r\n                return itemChange.item.itemComponent;\r\n            })\r\n            .forEach((itemChange: any) => {\r\n\r\n                if (itemChange.changes.indexOf('x') >= 0) {\r\n                    itemChange.item.triggerChangeX(breakpoint);\r\n                }\r\n                if (itemChange.changes.indexOf('y') >= 0) {\r\n                    itemChange.item.triggerChangeY(breakpoint);\r\n                }\r\n                if (itemChange.changes.indexOf('w') >= 0) {\r\n                    itemChange.item.triggerChangeW(breakpoint);\r\n                }\r\n                if (itemChange.changes.indexOf('h') >= 0) {\r\n                    itemChange.item.triggerChangeH(breakpoint);\r\n                }\r\n                // should be called only once (not for each breakpoint)\r\n                itemChange.item.itemComponent.change.emit({\r\n                    item: itemChange.item,\r\n                    oldValues: itemChange.oldValues || {},\r\n                    isNew: itemChange.isNew,\r\n                    changes: itemChange.changes,\r\n                    breakpoint: breakpoint\r\n                });\r\n            });\r\n    }\r\n\r\n    private removePositionHighlight() {\r\n        this.$positionHighlight.style.display = 'none';\r\n    }\r\n\r\n}\r\n","import { Observable, of, fromEvent, pipe, merge } from 'rxjs';\r\nimport { debounceTime, map, distinctUntilChanged } from 'rxjs/operators';\r\n\r\nimport { IGridsterOptions } from './IGridsterOptions';\r\n\r\nexport class GridsterOptions {\r\n    direction: string;\r\n    lanes: number;\r\n    widthHeightRatio: number;\r\n    heightToFontSizeRatio: number;\r\n    responsiveView: boolean;\r\n    responsiveSizes: boolean;\r\n    responsiveToParent: boolean;\r\n    dragAndDrop: boolean;\r\n    resizable: boolean;\r\n    shrink: boolean;\r\n    minWidth: number;\r\n    useCSSTransforms: boolean;\r\n\r\n    defaults: IGridsterOptions = {\r\n        lanes: 5,\r\n        direction: 'horizontal',\r\n        widthHeightRatio: 1,\r\n        shrink: false,\r\n        responsiveView: true,\r\n        responsiveSizes: false,\r\n        responsiveToParent: false,\r\n        dragAndDrop: true,\r\n        resizable: false,\r\n        useCSSTransforms: false,\r\n        floating: true,\r\n        tolerance: 'pointer'\r\n    };\r\n\r\n    change: Observable<IGridsterOptions>;\r\n\r\n    responsiveOptions: Array<IGridsterOptions> = [];\r\n    basicOptions: IGridsterOptions;\r\n\r\n    breakpointsMap = {\r\n        sm: 576, // Small devices\r\n        md: 768, // Medium devices\r\n        lg: 992, // Large devices\r\n        xl: 1200 // Extra large\r\n    };\r\n\r\n    constructor(config: IGridsterOptions, gridsterElement: HTMLElement) {\r\n        const responsiveContainer = config.responsiveToParent ? gridsterElement : window;\r\n\r\n        this.basicOptions = config;\r\n        this.responsiveOptions = this.extendResponsiveOptions(config.responsiveOptions || []);\r\n\r\n        this.change = merge(\r\n                of(this.getOptionsByWidth(this.getElementWidth(responsiveContainer))),\r\n                fromEvent(window, 'resize').pipe(\r\n                    debounceTime(config.responsiveDebounce || 0),\r\n                    map((event: Event) => this.getOptionsByWidth(this.getElementWidth(responsiveContainer)))\r\n                )\r\n            ).pipe(distinctUntilChanged(null, (options: any) => options.minWidth));\r\n    }\r\n\r\n    getOptionsByWidth(width: number): IGridsterOptions {\r\n        let i = 0;\r\n        let options: IGridsterOptions = Object.assign({}, this.defaults, this.basicOptions);\r\n\r\n        while (this.responsiveOptions[i]) {\r\n            if (this.responsiveOptions[i].minWidth <= width) {\r\n                options = this.responsiveOptions[i];\r\n            }\r\n            i++;\r\n        }\r\n\r\n        return options;\r\n    }\r\n\r\n    private extendResponsiveOptions(responsiveOptions: Array<IGridsterOptions>): Array<IGridsterOptions> {\r\n        return responsiveOptions\r\n            // responsive options are valid only with \"breakpoint\" property\r\n            .filter(options => options.breakpoint)\r\n            // set default minWidth if not given\r\n            .map((options) => {\r\n                return Object.assign({\r\n                    minWidth: this.breakpointsMap[options.breakpoint] || 0\r\n                }, options);\r\n            })\r\n            .sort((curr, next) => curr.minWidth - next.minWidth)\r\n            .map((options) => <IGridsterOptions>Object.assign({}, this.defaults, this.basicOptions, options));\r\n    }\r\n\r\n    private getElementWidth($element: any) {\r\n        if ($element === window) {\r\n            return window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;\r\n        }\r\n\r\n        return $element.clientWidth;\r\n    }\r\n}\r\n","import { Injectable } from '@angular/core';\r\nimport { Observable, Subject, merge } from 'rxjs';\r\nimport { takeUntil, switchMap, map, scan, filter, share, tap } from 'rxjs/operators';\r\n\r\nimport { GridsterService } from '../gridster.service';\r\nimport { GridsterItemPrototypeDirective } from './gridster-item-prototype.directive';\r\nimport { utils } from '../utils/utils';\r\nimport { DraggableEvent } from '../utils/DraggableEvent';\r\n\r\n@Injectable()\r\nexport class GridsterPrototypeService {\r\n\r\n    private isDragging = false;\r\n\r\n    private dragSubject = new Subject<any>();\r\n\r\n    private dragStartSubject = new Subject<any>();\r\n\r\n    private dragStopSubject = new Subject<any>();\r\n\r\n    constructor() {}\r\n\r\n    observeDropOver (gridster: GridsterService) {\r\n        return this.dragStopSubject.pipe(\r\n            filter((data) => {\r\n                const gridsterEl = gridster.gridsterComponent.$element;\r\n                const isOverNestedGridster = [].slice.call(gridsterEl.querySelectorAll('gridster'))\r\n                    .reduce((isOverGridster, nestedGridsterEl) => {\r\n                        return isOverGridster ||\r\n                            this.isOverGridster(data.item, nestedGridsterEl, data.event, gridster.options);\r\n                    }, false);\r\n\r\n                if (isOverNestedGridster) {\r\n                    return false;\r\n                }\r\n\r\n                return this.isOverGridster(data.item, gridsterEl, data.event, gridster.options);\r\n            }),\r\n            tap((data) => {\r\n                // TODO: what we should provide as a param?\r\n                // prototype.drop.emit({item: prototype.item});\r\n                data.item.onDrop(gridster);\r\n            })\r\n        );\r\n    }\r\n\r\n    observeDropOut (gridster: GridsterService) {\r\n        return this.dragStopSubject.pipe(\r\n            filter((data) => {\r\n                const gridsterEl = gridster.gridsterComponent.$element;\r\n\r\n                return !this.isOverGridster(data.item, gridsterEl, data.event, gridster.options);\r\n            }),\r\n            tap((data) => {\r\n                // TODO: what we should provide as a param?\r\n                data.item.onCancel();\r\n            })\r\n        );\r\n    }\r\n\r\n    observeDragOver(gridster: GridsterService): {\r\n        dragOver: Observable<GridsterItemPrototypeDirective>,\r\n        dragEnter: Observable<GridsterItemPrototypeDirective>,\r\n        dragOut: Observable<GridsterItemPrototypeDirective>\r\n    } {\r\n        const over = this.dragSubject.pipe(\r\n            map((data) => {\r\n                const gridsterEl = gridster.gridsterComponent.$element;\r\n\r\n                return {\r\n                  item: data.item,\r\n                  event: data.event,\r\n                  isOver: this.isOverGridster(data.item, gridsterEl, data.event, gridster.options),\r\n                  isDrop: false\r\n                };\r\n            })\r\n        );\r\n\r\n        const drop = this.dragStopSubject.pipe(\r\n            map((data) => {\r\n                const gridsterEl = gridster.gridsterComponent.$element;\r\n\r\n                return {\r\n                    item: data.item,\r\n                    event: data.event,\r\n                    isOver: this.isOverGridster(data.item, gridsterEl, data.event, gridster.options),\r\n                    isDrop: true\r\n                };\r\n            })\r\n        );\r\n\r\n        const dragExt = merge(\r\n                // dragStartSubject is connected in case when item prototype is placed above gridster\r\n                // and drag enter is not fired\r\n                this.dragStartSubject.pipe(map(() => ({ item: null, isOver: false, isDrop: false }))),\r\n                over,\r\n                drop\r\n            ).pipe(\r\n                scan((prev: any, next: any) => {\r\n                    return {\r\n                        item: next.item,\r\n                        event: next.event,\r\n                        isOver: next.isOver,\r\n                        isEnter: prev.isOver === false && next.isOver === true,\r\n                        isOut: prev.isOver === true && next.isOver === false && !prev.isDrop,\r\n                        isDrop: next.isDrop\r\n                    };\r\n                }),\r\n                filter((data: any) => {\r\n                    return !data.isDrop;\r\n                }),\r\n                share()\r\n            );\r\n\r\n        const dragEnter = this.createDragEnterObservable(dragExt, gridster);\r\n        const dragOut = this.createDragOutObservable(dragExt, gridster);\r\n        const dragOver = dragEnter\r\n            .pipe(\r\n                switchMap(() => this.dragSubject.pipe(takeUntil(dragOut))),\r\n                map((data: any) => data.item)\r\n            );\r\n\r\n        return { dragEnter, dragOut, dragOver };\r\n    }\r\n\r\n    dragItemStart(item: GridsterItemPrototypeDirective, event: DraggableEvent) {\r\n        this.isDragging = true;\r\n        this.dragStartSubject.next({ item, event });\r\n    }\r\n\r\n    dragItemStop(item: GridsterItemPrototypeDirective, event: DraggableEvent) {\r\n        this.isDragging = false;\r\n        this.dragStopSubject.next({ item, event });\r\n    }\r\n\r\n    updatePrototypePosition(item: GridsterItemPrototypeDirective, event: DraggableEvent) {\r\n        this.dragSubject.next({ item, event });\r\n    }\r\n\r\n    /**\r\n     * Creates observable that is fired on dragging over gridster container.\r\n     */\r\n    private createDragOverObservable (\r\n        dragIsOver: Observable<{item: GridsterItemPrototypeDirective, isOver: boolean}>,\r\n        gridster: GridsterService\r\n    ) {\r\n        return dragIsOver.pipe(\r\n            filter((data: any) => data.isOver && !data.isEnter && !data.isOut),\r\n            map((data: any): GridsterItemPrototypeDirective => data.item),\r\n            tap((item) => item.onOver(gridster))\r\n        );\r\n    }\r\n    /**\r\n     * Creates observable that is fired on drag enter gridster container.\r\n     */\r\n    private createDragEnterObservable (\r\n        dragIsOver: Observable<{item: GridsterItemPrototypeDirective, isOver: boolean}>,\r\n        gridster: GridsterService\r\n    ) {\r\n        return dragIsOver.pipe(\r\n            filter((data: any) => data.isEnter),\r\n            map((data: any): GridsterItemPrototypeDirective => data.item),\r\n            tap((item) => item.onEnter(gridster))\r\n        );\r\n    }\r\n    /**\r\n     * Creates observable that is fired on drag out gridster container.\r\n     */\r\n    private createDragOutObservable (\r\n        dragIsOver: Observable<{item: GridsterItemPrototypeDirective,\r\n        isOver: boolean}>,\r\n        gridster: GridsterService\r\n    ) {\r\n        return dragIsOver.pipe(\r\n            filter((data: any) => data.isOut),\r\n            map((data: any): GridsterItemPrototypeDirective => data.item),\r\n            tap((item) => item.onOut(gridster))\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Checks whether \"element\" position fits inside \"containerEl\" position.\r\n     * It checks if \"element\" is totally covered by \"containerEl\" area.\r\n     */\r\n    private isOverGridster(item: GridsterItemPrototypeDirective, gridsterEl: HTMLElement, event, options): boolean {\r\n        const el = item.$element;\r\n        const parentItem = <HTMLElement>gridsterEl.parentElement &&\r\n            <HTMLElement>gridsterEl.parentElement.closest('gridster-item');\r\n\r\n        if (parentItem) {\r\n            return this.isOverGridster(item, parentItem, event, options);\r\n        }\r\n\r\n        switch (options.tolerance) {\r\n            case 'fit':\r\n                return utils.isElementFitContainer(el, gridsterEl);\r\n            case 'intersect':\r\n                return utils.isElementIntersectContainer(el, gridsterEl);\r\n            case 'touch':\r\n                return utils.isElementTouchContainer(el, gridsterEl);\r\n            default:\r\n                return utils.isCursorAboveElement(event, gridsterEl);\r\n        }\r\n    }\r\n}\r\n","import {\r\n    Component,\r\n    OnInit,\r\n    AfterContentInit,\r\n    OnDestroy,\r\n    ElementRef,\r\n    ViewChild,\r\n    NgZone,\r\n    Input,\r\n    Output,\r\n    EventEmitter,\r\n    ChangeDetectionStrategy,\r\n    HostBinding,\r\n    ViewEncapsulation\r\n} from '@angular/core';\r\nimport {\r\n    Observable,\r\n    Subscription,\r\n    fromEvent,\r\n    ConnectableObservable\r\n} from 'rxjs';\r\nimport { debounceTime, filter, publish } from 'rxjs/operators';\r\n\r\nimport { utils } from './utils/utils';\r\nimport { GridsterService } from './gridster.service';\r\nimport { IGridsterOptions } from './IGridsterOptions';\r\nimport { IGridsterDraggableOptions } from './IGridsterDraggableOptions';\r\nimport { GridsterPrototypeService } from './gridster-prototype/gridster-prototype.service';\r\nimport { GridsterItemPrototypeDirective } from './gridster-prototype/gridster-item-prototype.directive';\r\nimport { GridListItem } from './gridList/GridListItem';\r\nimport { GridsterOptions } from './GridsterOptions';\r\n\r\n@Component({\r\n    selector: 'ngx-gridster',\r\n    template: `<div class=\"gridster-container\">\r\n      <ng-content></ng-content>\r\n      <div class=\"position-highlight\" style=\"display:none;\" #positionHighlight>\r\n        <div class=\"inner\"></div>\r\n      </div>\r\n    </div>`,\r\n    styles: [\r\n        `\r\n            ngx-gridster {\r\n                position: relative;\r\n                display: block;\r\n                left: 0;\r\n                width: 100%;\r\n            }\r\n\r\n            ngx-gridster.gridster--dragging {\r\n                -moz-user-select: none;\r\n                -khtml-user-select: none;\r\n                -webkit-user-select: none;\r\n                -ms-user-select: none;\r\n                user-select: none;\r\n            }\r\n\r\n            ngx-gridster .gridster-container {\r\n                position: relative;\r\n                width: 100%;\r\n                list-style: none;\r\n                -webkit-transition: width 0.2s, height 0.2s;\r\n                transition: width 0.2s, height 0.2s;\r\n            }\r\n\r\n            ngx-gridster .position-highlight {\r\n                display: block;\r\n                position: absolute;\r\n                z-index: 1;\r\n            }\r\n        `\r\n    ],\r\n    providers: [GridsterService],\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class GridsterComponent implements OnInit, AfterContentInit, OnDestroy {\r\n    @Input() options: IGridsterOptions;\r\n    @Output() optionsChange = new EventEmitter<any>();\r\n    @Output() ready = new EventEmitter<any>();\r\n    @Output() reflow = new EventEmitter<any>();\r\n    @Output() prototypeDrop = new EventEmitter<{ item: GridListItem }>();\r\n    @Output() prototypeEnter = new EventEmitter<{ item: GridListItem }>();\r\n    @Output() prototypeOut = new EventEmitter<{ item: GridListItem }>();\r\n    @Input() draggableOptions: IGridsterDraggableOptions = {};\r\n    @Input() parent: GridsterComponent;\r\n\r\n    @ViewChild('positionHighlight', { static: true }) $positionHighlight;\r\n    @HostBinding('class.gridster--dragging') isDragging = false;\r\n    @HostBinding('class.gridster--resizing') isResizing = false;\r\n\r\n    @HostBinding('class.gridster--ready') isReady = false;\r\n    gridster: GridsterService;\r\n    $element: HTMLElement;\r\n\r\n    gridsterOptions: GridsterOptions;\r\n    isPrototypeEntered = false;\r\n    private isDisabled = false;\r\n    private subscription = new Subscription();\r\n\r\n    constructor(\r\n        private zone: NgZone,\r\n        elementRef: ElementRef,\r\n        gridster: GridsterService,\r\n        private gridsterPrototype: GridsterPrototypeService\r\n    ) {\r\n        this.gridster = gridster;\r\n        this.$element = elementRef.nativeElement;\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.gridsterOptions = new GridsterOptions(this.options, this.$element);\r\n\r\n        if (this.options.useCSSTransforms) {\r\n            this.$element.classList.add('css-transform');\r\n        }\r\n\r\n        this.subscription.add(\r\n            this.gridsterOptions.change.subscribe(options => {\r\n                this.gridster.options = options;\r\n                if (this.gridster.gridList) {\r\n                    this.gridster.gridList.options = options;\r\n                }\r\n                setTimeout(() => this.optionsChange.emit(options));\r\n            })\r\n        );\r\n\r\n        this.gridster.init(this);\r\n\r\n        this.subscription.add(\r\n            fromEvent(window, 'resize')\r\n                .pipe(\r\n                    debounceTime(this.gridster.options.responsiveDebounce || 0),\r\n                    filter(() => this.gridster.options.responsiveView)\r\n                )\r\n                .subscribe(() => this.reload())\r\n        );\r\n\r\n        this.zone.runOutsideAngular(() => {\r\n            this.subscription.add(\r\n                fromEvent(document, 'scroll', { passive: true }).subscribe(() =>\r\n                    this.updateGridsterElementData()\r\n                )\r\n            );\r\n            const scrollableContainer = utils.getScrollableContainer(this.$element);\r\n            if (scrollableContainer) {\r\n                this.subscription.add(\r\n                    fromEvent(scrollableContainer, 'scroll', { passive: true })\r\n                    .subscribe(() =>\r\n                        this.updateGridsterElementData()\r\n                    )\r\n                );\r\n            }\r\n        });\r\n    }\r\n\r\n    ngAfterContentInit() {\r\n        this.gridster.start();\r\n\r\n        this.updateGridsterElementData();\r\n\r\n        this.connectGridsterPrototype();\r\n\r\n        this.gridster.$positionHighlight = this.$positionHighlight.nativeElement;\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.subscription.unsubscribe();\r\n    }\r\n\r\n    /**\r\n     * Change gridster config option and rebuild\r\n     * @param string name\r\n     * @param any value\r\n     * @return GridsterComponent\r\n     */\r\n    setOption(name: string, value: any) {\r\n        if (name === 'dragAndDrop') {\r\n            if (value) {\r\n                this.enableDraggable();\r\n            } else {\r\n                this.disableDraggable();\r\n            }\r\n        }\r\n        if (name === 'resizable') {\r\n            if (value) {\r\n                this.enableResizable();\r\n            } else {\r\n                this.disableResizable();\r\n            }\r\n        }\r\n        if (name === 'lanes') {\r\n            this.gridster.options.lanes = value;\r\n\r\n            this.gridster.gridList.fixItemsPositions(this.gridster.options);\r\n            this.reflowGridster();\r\n        }\r\n        if (name === 'direction') {\r\n            this.gridster.options.direction = value;\r\n            this.gridster.gridList.pullItemsToLeft();\r\n        }\r\n        if (name === 'widthHeightRatio') {\r\n            this.gridster.options.widthHeightRatio = parseFloat(value || 1);\r\n        }\r\n        if (name === 'responsiveView') {\r\n            this.gridster.options.responsiveView = !!value;\r\n        }\r\n        this.gridster.gridList.setOption(name, value);\r\n\r\n        return this;\r\n    }\r\n\r\n    reload() {\r\n        setTimeout(() => {\r\n            this.gridster.fixItemsPositions();\r\n            this.reflowGridster();\r\n        });\r\n\r\n        return this;\r\n    }\r\n\r\n    reflowGridster(isInit = false) {\r\n        this.gridster.reflow();\r\n        this.reflow.emit({\r\n            isInit: isInit,\r\n            gridsterComponent: this\r\n        });\r\n    }\r\n\r\n    updateGridsterElementData() {\r\n        this.gridster.gridsterScrollData = this.getScrollPositionFromParents(\r\n            this.$element\r\n        );\r\n        this.gridster.gridsterRect = this.$element.getBoundingClientRect();\r\n    }\r\n\r\n    setReady() {\r\n        setTimeout(() => (this.isReady = true));\r\n        this.ready.emit();\r\n    }\r\n\r\n    adjustItemsHeightToContent(\r\n        scrollableItemElementSelector: string = '.gridster-item-inner'\r\n    ) {\r\n        this.gridster.items\r\n            // convert each item to object with information about content height and scroll height\r\n            .map((item: GridListItem) => {\r\n                const scrollEl = item.$element.querySelector(\r\n                    scrollableItemElementSelector\r\n                );\r\n                const contentEl = scrollEl.lastElementChild;\r\n                const scrollElDistance = utils.getRelativeCoordinates(\r\n                    scrollEl,\r\n                    item.$element\r\n                );\r\n                const scrollElRect = scrollEl.getBoundingClientRect();\r\n                const contentRect = contentEl.getBoundingClientRect();\r\n\r\n                return {\r\n                    item,\r\n                    contentHeight: contentRect.bottom - scrollElRect.top,\r\n                    scrollElDistance\r\n                };\r\n            })\r\n            // calculate required height in lanes amount and update item \"h\"\r\n            .forEach(data => {\r\n                data.item.h = Math.ceil(<any>(\r\n                    (data.contentHeight /\r\n                        (this.gridster.cellHeight - data.scrollElDistance.top))\r\n                ));\r\n            });\r\n\r\n        this.gridster.fixItemsPositions();\r\n        this.gridster.reflow();\r\n    }\r\n\r\n    disable(item) {\r\n        const itemIdx = this.gridster.items.indexOf(item.itemComponent);\r\n\r\n        this.isDisabled = true;\r\n        if (itemIdx >= 0) {\r\n            delete this.gridster.items[\r\n                this.gridster.items.indexOf(item.itemComponent)\r\n            ];\r\n        }\r\n        this.gridster.onDragOut(item);\r\n    }\r\n\r\n    enable() {\r\n        this.isDisabled = false;\r\n    }\r\n\r\n    private getScrollPositionFromParents(\r\n        element: Element,\r\n        data = { scrollTop: 0, scrollLeft: 0 }\r\n    ): { scrollTop: number; scrollLeft: number } {\r\n        if (element.parentElement && element.parentElement !== document.body) {\r\n            data.scrollTop += element.parentElement.scrollTop;\r\n            data.scrollLeft += element.parentElement.scrollLeft;\r\n\r\n            return this.getScrollPositionFromParents(\r\n                element.parentElement,\r\n                data\r\n            );\r\n        }\r\n\r\n        return {\r\n            scrollTop: data.scrollTop,\r\n            scrollLeft: data.scrollLeft\r\n        };\r\n    }\r\n\r\n    /**\r\n     * Connect gridster prototype item to gridster dragging hooks (onStart, onDrag, onStop).\r\n     */\r\n    private connectGridsterPrototype() {\r\n        this.gridsterPrototype.observeDropOut(this.gridster).subscribe();\r\n\r\n        const dropOverObservable = <ConnectableObservable<any>>(\r\n            this.gridsterPrototype\r\n                .observeDropOver(this.gridster)\r\n                .pipe(publish())\r\n        );\r\n\r\n        const dragObservable = this.gridsterPrototype.observeDragOver(\r\n            this.gridster\r\n        );\r\n\r\n        dragObservable.dragOver\r\n            .pipe(filter(() => !this.isDisabled))\r\n            .subscribe((prototype: GridsterItemPrototypeDirective) => {\r\n                if (!this.isPrototypeEntered) {\r\n                    return;\r\n                }\r\n                this.gridster.onDrag(prototype.item);\r\n            });\r\n\r\n        dragObservable.dragEnter\r\n            .pipe(filter(() => !this.isDisabled))\r\n            .subscribe((prototype: GridsterItemPrototypeDirective) => {\r\n                this.isPrototypeEntered = true;\r\n\r\n                if (this.gridster.items.indexOf(prototype.item) < 0) {\r\n                    this.gridster.items.push(prototype.item);\r\n                }\r\n                this.gridster.onStart(prototype.item);\r\n                prototype.setDragContextGridster(this.gridster);\r\n\r\n                if (this.parent) {\r\n                    this.parent.disable(prototype.item);\r\n                }\r\n                this.prototypeEnter.emit({ item: prototype.item });\r\n            });\r\n\r\n        dragObservable.dragOut\r\n            .pipe(filter(() => !this.isDisabled))\r\n            .subscribe((prototype: GridsterItemPrototypeDirective) => {\r\n                if (!this.isPrototypeEntered) {\r\n                    return;\r\n                }\r\n                this.gridster.onDragOut(prototype.item);\r\n                this.isPrototypeEntered = false;\r\n\r\n                this.prototypeOut.emit({ item: prototype.item });\r\n\r\n                if (this.parent) {\r\n                    this.parent.enable();\r\n\r\n                    this.parent.isPrototypeEntered = true;\r\n                    if (\r\n                        this.parent.gridster.items.indexOf(prototype.item) < 0\r\n                    ) {\r\n                        this.parent.gridster.items.push(prototype.item);\r\n                    }\r\n                    this.parent.gridster.onStart(prototype.item);\r\n                    prototype.setDragContextGridster(this.parent.gridster);\r\n                    // timeout is needed to be sure that \"enter\" event is fired after \"out\"\r\n                    setTimeout(() => {\r\n                        this.parent.prototypeEnter.emit({\r\n                            item: prototype.item\r\n                        });\r\n                        prototype.onEnter(this.parent.gridster);\r\n                    });\r\n                }\r\n            });\r\n\r\n        dropOverObservable\r\n            .pipe(filter(() => !this.isDisabled))\r\n            .subscribe(data => {\r\n                if (!this.isPrototypeEntered) {\r\n                    return;\r\n                }\r\n\r\n                this.gridster.onStop(data.item.item);\r\n                this.gridster.removeItem(data.item.item);\r\n\r\n                this.isPrototypeEntered = false;\r\n                if (this.parent) {\r\n                    this.parent.enable();\r\n                }\r\n                this.prototypeDrop.emit({ item: data.item.item });\r\n            });\r\n\r\n        dropOverObservable.connect();\r\n    }\r\n\r\n    private enableDraggable() {\r\n        this.gridster.options.dragAndDrop = true;\r\n\r\n        this.gridster.items\r\n            .filter(\r\n                item => item.itemComponent && item.itemComponent.dragAndDrop\r\n            )\r\n            .forEach((item: GridListItem) =>\r\n                item.itemComponent.enableDragDrop()\r\n            );\r\n    }\r\n\r\n    private disableDraggable() {\r\n        this.gridster.options.dragAndDrop = false;\r\n\r\n        this.gridster.items\r\n            .filter(item => item.itemComponent)\r\n            .forEach((item: GridListItem) =>\r\n                item.itemComponent.disableDraggable()\r\n            );\r\n    }\r\n\r\n    private enableResizable() {\r\n        this.gridster.options.resizable = true;\r\n\r\n        this.gridster.items\r\n            .filter(item => item.itemComponent && item.itemComponent.resizable)\r\n            .forEach((item: GridListItem) =>\r\n                item.itemComponent.enableResizable()\r\n            );\r\n    }\r\n\r\n    private disableResizable() {\r\n        this.gridster.options.resizable = false;\r\n\r\n        this.gridster.items.forEach((item: GridListItem) =>\r\n            item.itemComponent.disableResizable()\r\n        );\r\n    }\r\n}\r\n","import { GridsterItemComponent } from '../gridster-item/gridster-item.component';\r\nimport { GridsterItemPrototypeDirective } from '../gridster-prototype/gridster-item-prototype.directive';\r\nimport { GridsterService } from '../gridster.service';\r\n\r\nexport class GridListItem {\r\n    static BREAKPOINTS: Array<string> = ['sm', 'md', 'lg', 'xl'];\r\n    static X_PROPERTY_MAP: any = {\r\n        sm: 'xSm',\r\n        md: 'xMd',\r\n        lg: 'xLg',\r\n        xl: 'xXl'\r\n    };\r\n\r\n    static Y_PROPERTY_MAP: any = {\r\n        sm: 'ySm',\r\n        md: 'yMd',\r\n        lg: 'yLg',\r\n        xl: 'yXl'\r\n    };\r\n\r\n    static W_PROPERTY_MAP: any = {\r\n        sm: 'wSm',\r\n        md: 'wMd',\r\n        lg: 'wLg',\r\n        xl: 'wXl'\r\n    };\r\n\r\n    static H_PROPERTY_MAP: any = {\r\n        sm: 'hSm',\r\n        md: 'hMd',\r\n        lg: 'hLg',\r\n        xl: 'hXl'\r\n    };\r\n\r\n    itemComponent: GridsterItemComponent;\r\n    itemPrototype: GridsterItemPrototypeDirective;\r\n    itemObject: any;\r\n\r\n    get $element () {\r\n        return this.getItem().$element;\r\n    }\r\n\r\n    get x () {\r\n        const item = this.getItem();\r\n        const breakpoint = item.gridster ? item.gridster.options.breakpoint : null;\r\n\r\n        return this.getValueX(breakpoint);\r\n    }\r\n    set x (value: number) {\r\n        const item = this.getItem();\r\n        const breakpoint = item.gridster ? item.gridster.options.breakpoint : null;\r\n\r\n        this.setValueX(value, breakpoint);\r\n    }\r\n\r\n    get y () {\r\n        const item = this.getItem();\r\n        const breakpoint = item.gridster ? item.gridster.options.breakpoint : null;\r\n\r\n        return this.getValueY(breakpoint);\r\n    }\r\n    set y (value: number) {\r\n        const item = this.getItem();\r\n        const breakpoint = item.gridster ? item.gridster.options.breakpoint : null;\r\n\r\n        this.setValueY(value, breakpoint);\r\n    }\r\n\r\n    get w () {\r\n        const item = this.getItem();\r\n        const breakpoint = item.gridster ? item.gridster.options.breakpoint : null;\r\n\r\n        return this.getValueW(breakpoint);\r\n    }\r\n    set w (value: number) {\r\n        const item = this.getItem();\r\n        const breakpoint = item.gridster ? item.gridster.options.breakpoint : null;\r\n\r\n        this.setValueW(value, breakpoint);\r\n    }\r\n\r\n    get h () {\r\n        const item = this.getItem();\r\n        const breakpoint = item.gridster ? item.gridster.options.breakpoint : null;\r\n\r\n        return this.getValueH(breakpoint);\r\n    }\r\n    set h (value: number) {\r\n        const item = this.getItem();\r\n        const breakpoint = item.gridster ? item.gridster.options.breakpoint : null;\r\n\r\n        this.setValueH(value, breakpoint);\r\n    }\r\n\r\n    get autoSize () {\r\n        return this.getItem().autoSize;\r\n    }\r\n    set autoSize (value: boolean) {\r\n        this.getItem().autoSize = value;\r\n    }\r\n\r\n    get dragAndDrop() {\r\n        return !!this.getItem().dragAndDrop;\r\n    }\r\n\r\n    get resizable() {\r\n        return !!this.getItem().resizable;\r\n    }\r\n\r\n    get positionX() {\r\n        const item = this.itemComponent || this.itemPrototype;\r\n\r\n        if (!item) {\r\n            return null;\r\n        }\r\n\r\n        return item.positionX;\r\n    }\r\n\r\n    get positionY() {\r\n        const item = this.itemComponent || this.itemPrototype;\r\n\r\n        if (!item) {\r\n            return null;\r\n        }\r\n\r\n        return item.positionY;\r\n    }\r\n\r\n    public setFromGridsterItem (item: GridsterItemComponent): GridListItem {\r\n        if (this.isItemSet()) {\r\n            throw new Error('GridListItem is already set.');\r\n        }\r\n        this.itemComponent = item;\r\n        return this;\r\n    }\r\n\r\n    public setFromGridsterItemPrototype (item: GridsterItemPrototypeDirective): GridListItem {\r\n        if (this.isItemSet()) {\r\n            throw new Error('GridListItem is already set.');\r\n        }\r\n        this.itemPrototype = item;\r\n        return this;\r\n    }\r\n\r\n    public setFromObjectLiteral (item: Object): GridListItem {\r\n        if (this.isItemSet()) {\r\n            throw new Error('GridListItem is already set.');\r\n        }\r\n        this.itemObject = item;\r\n        return this;\r\n    }\r\n\r\n    public copy() {\r\n        const itemCopy = new GridListItem();\r\n\r\n        return itemCopy.setFromObjectLiteral({\r\n            $element: this.$element,\r\n            x: this.x,\r\n            y: this.y,\r\n            w: this.w,\r\n            h: this.h,\r\n            autoSize: this.autoSize,\r\n            dragAndDrop: this.dragAndDrop,\r\n            resizable: this.resizable\r\n        });\r\n    }\r\n\r\n    public copyForBreakpoint(breakpoint?) {\r\n        const itemCopy = new GridListItem();\r\n\r\n        return itemCopy.setFromObjectLiteral({\r\n            $element: this.$element,\r\n            x: this.getValueX(breakpoint),\r\n            y: this.getValueY(breakpoint),\r\n            w: this.getValueW(breakpoint),\r\n            h: this.getValueH(breakpoint),\r\n            autoSize: this.autoSize,\r\n            dragAndDrop: this.dragAndDrop,\r\n            resizable: this.resizable\r\n        });\r\n    }\r\n\r\n    public getValueX(breakpoint?) {\r\n        const item = this.getItem();\r\n\r\n        return item[this.getXProperty(breakpoint)];\r\n    }\r\n\r\n    public getValueY(breakpoint?) {\r\n        const item = this.getItem();\r\n\r\n        return item[this.getYProperty(breakpoint)];\r\n    }\r\n\r\n    public getValueW(breakpoint?) {\r\n        const item = this.getItem();\r\n\r\n        return item[this.getWProperty(breakpoint)] || 1;\r\n    }\r\n\r\n    public getValueH(breakpoint?) {\r\n        const item = this.getItem();\r\n\r\n        return item[this.getHProperty(breakpoint)] || 1;\r\n    }\r\n\r\n    public setValueX(value: number, breakpoint?) {\r\n        const item = this.getItem();\r\n\r\n        item[this.getXProperty(breakpoint)] = value;\r\n    }\r\n\r\n    public setValueY(value: number, breakpoint?) {\r\n        const item = this.getItem();\r\n\r\n        item[this.getYProperty(breakpoint)] = value;\r\n    }\r\n\r\n    public setValueW(value: number, breakpoint?) {\r\n        const item = this.getItem();\r\n\r\n        item[this.getWProperty(breakpoint)] = value;\r\n    }\r\n\r\n    public setValueH(value: number, breakpoint?) {\r\n        const item = this.getItem();\r\n\r\n        item[this.getHProperty(breakpoint)] = value;\r\n    }\r\n\r\n    public triggerChangeX(breakpoint?) {\r\n        const item = this.itemComponent;\r\n        if (item) {\r\n            item[this.getXProperty(breakpoint) + 'Change'].emit(this.getValueX(breakpoint));\r\n        }\r\n    }\r\n\r\n    public triggerChangeY(breakpoint?) {\r\n        const item = this.itemComponent;\r\n        if (item) {\r\n            item[this.getYProperty(breakpoint) + 'Change'].emit(this.getValueY(breakpoint));\r\n        }\r\n    }\r\n\r\n    public triggerChangeW(breakpoint?) {\r\n        const item = this.itemComponent;\r\n        if (item) {\r\n            item[this.getWProperty(breakpoint) + 'Change'].emit(this.getValueW(breakpoint));\r\n        }\r\n    }\r\n\r\n    public triggerChangeH(breakpoint?) {\r\n        const item = this.itemComponent;\r\n        if (item) {\r\n            item[this.getHProperty(breakpoint) + 'Change'].emit(this.getValueH(breakpoint));\r\n        }\r\n    }\r\n\r\n    public hasPositions(breakpoint?) {\r\n        const x = this.getValueX(breakpoint);\r\n        const y = this.getValueY(breakpoint);\r\n\r\n        return (x || x === 0) && (y || y === 0);\r\n    }\r\n\r\n    public applyPosition(gridster?: GridsterService) {\r\n        const position = this.calculatePosition(gridster);\r\n\r\n        this.itemComponent.positionX = position.left;\r\n        this.itemComponent.positionY = position.top;\r\n        this.itemComponent.updateElemenetPosition();\r\n    }\r\n\r\n    public calculatePosition(gridster?: GridsterService): {left: number, top: number} {\r\n        if (!gridster && !this.itemComponent) {\r\n            return {left: 0, top: 0};\r\n        }\r\n        gridster = gridster || this.itemComponent.gridster;\r\n\r\n        return {\r\n            left: this.x * gridster.cellWidth,\r\n            top: this.y * gridster.cellHeight\r\n        };\r\n    }\r\n\r\n    public applySize(gridster?: GridsterService): void {\r\n        const size = this.calculateSize(gridster);\r\n\r\n        this.$element.style.width = size.width + 'px';\r\n        this.$element.style.height = size.height + 'px';\r\n    }\r\n\r\n    public calculateSize(gridster?: GridsterService): {width: number, height: number} {\r\n        if (!gridster && !this.itemComponent) {\r\n            return {width: 0, height: 0};\r\n        }\r\n        gridster = gridster || this.itemComponent.gridster;\r\n\r\n        let width = this.getValueW(gridster.options.breakpoint);\r\n        let height = this.getValueH(gridster.options.breakpoint);\r\n\r\n        if (gridster.options.direction === 'vertical') {\r\n            width = Math.min(width, gridster.options.lanes);\r\n        }\r\n        if (gridster.options.direction === 'horizontal') {\r\n            height = Math.min(height, gridster.options.lanes);\r\n        }\r\n\r\n        return {\r\n            width: width * gridster.cellWidth,\r\n            height: height * gridster.cellHeight\r\n        };\r\n    }\r\n\r\n    private getXProperty(breakpoint?: string) {\r\n\r\n        if (breakpoint && this.itemComponent) {\r\n            return GridListItem.X_PROPERTY_MAP[breakpoint];\r\n        } else {\r\n            return 'x';\r\n        }\r\n    }\r\n\r\n    private getYProperty(breakpoint?: string) {\r\n\r\n        if (breakpoint && this.itemComponent) {\r\n            return GridListItem.Y_PROPERTY_MAP[breakpoint];\r\n        } else {\r\n            return 'y';\r\n        }\r\n    }\r\n\r\n    private getWProperty(breakpoint?: string) {\r\n        if (this.itemPrototype) {\r\n            return this.itemPrototype[GridListItem.W_PROPERTY_MAP[breakpoint]] ?\r\n                GridListItem.W_PROPERTY_MAP[breakpoint] : 'w';\r\n        }\r\n\r\n        const item = this.getItem();\r\n        const responsiveSizes = item.gridster && item.gridster.options.responsiveSizes;\r\n\r\n        if (breakpoint && responsiveSizes) {\r\n            return GridListItem.W_PROPERTY_MAP[breakpoint];\r\n        } else {\r\n            return 'w';\r\n        }\r\n    }\r\n\r\n    private getHProperty(breakpoint?: string) {\r\n        if (this.itemPrototype) {\r\n            return this.itemPrototype[GridListItem.H_PROPERTY_MAP[breakpoint]] ?\r\n                GridListItem.H_PROPERTY_MAP[breakpoint] : 'h';\r\n        }\r\n\r\n        const item = this.getItem();\r\n        const responsiveSizes = item.gridster && item.gridster.options.responsiveSizes;\r\n\r\n        if (breakpoint && responsiveSizes) {\r\n            return GridListItem.H_PROPERTY_MAP[breakpoint];\r\n        } else {\r\n            return 'h';\r\n        }\r\n    }\r\n\r\n    private getItem(): any {\r\n        const item = this.itemComponent || this.itemPrototype || this.itemObject;\r\n\r\n        if (!item) {\r\n            throw new Error('GridListItem is not set.');\r\n        }\r\n        return item;\r\n    }\r\n\r\n    private isItemSet() {\r\n        return this.itemComponent || this.itemPrototype || this.itemObject;\r\n    }\r\n}\r\n","export class DraggableEvent {\r\n    clientX: number;\r\n\r\n    clientY: number;\r\n\r\n    pageX: number;\r\n\r\n    pageY: number;\r\n\r\n    target: any;\r\n\r\n    type: string;\r\n\r\n\r\n    private touchEvent: TouchEvent;\r\n\r\n    private mouseEvent: MouseEvent;\r\n\r\n    constructor(event: any) {\r\n        if (event.touches) {\r\n            this.touchEvent = (<TouchEvent>event);\r\n            this.setDataFromTouchEvent(this.touchEvent);\r\n        } else {\r\n            this.mouseEvent = (<MouseEvent>event);\r\n            this.setDataFromMouseEvent(this.mouseEvent);\r\n        }\r\n    }\r\n\r\n    isTouchEvent(): boolean {\r\n        return !!this.touchEvent;\r\n    }\r\n\r\n    pauseEvent() {\r\n        const event: Event = this.touchEvent || this.mouseEvent;\r\n\r\n        if (event.stopPropagation) {\r\n            event.stopPropagation();\r\n        }\r\n        if (event.preventDefault) {\r\n            event.preventDefault();\r\n        }\r\n        event.cancelBubble = true;\r\n        event.returnValue = false;\r\n        return false;\r\n    }\r\n\r\n    getRelativeCoordinates(container: HTMLElement): {x: number, y: number} {\r\n        const scrollTop = window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop;\r\n        const scrollLeft = window.pageXOffset || document.documentElement.scrollLeft || document.body.scrollLeft;\r\n\r\n        const rect = container.getBoundingClientRect();\r\n\r\n        return {\r\n            x: this.pageX - rect.left - scrollLeft,\r\n            y: this.pageY - rect.top - scrollTop,\r\n        };\r\n    }\r\n\r\n    private setDataFromMouseEvent(event: MouseEvent): void {\r\n        this.target = event.target;\r\n        this.clientX = event.clientX;\r\n        this.clientY = event.clientY;\r\n        this.pageX = event.pageX;\r\n        this.pageY = event.pageY;\r\n        this.type = event.type;\r\n    }\r\n\r\n    private setDataFromTouchEvent(event: TouchEvent): void {\r\n        const touch = event.touches[0] || event.changedTouches[0];\r\n\r\n        this.target = event.target;\r\n        this.clientX = touch.clientX;\r\n        this.clientY = touch.clientY;\r\n        this.pageX = touch.pageX;\r\n        this.pageY = touch.pageY;\r\n        this.type = event.type;\r\n\r\n    }\r\n}\r\n","import { Observable, fromEvent, merge, pipe } from 'rxjs';\r\nimport { share, map, filter, tap, switchMap, takeUntil, take, skip } from 'rxjs/operators';\r\n\r\nimport { DraggableEvent } from './DraggableEvent';\r\nimport { utils } from './utils';\r\n\r\nexport class Draggable {\r\n    static SCROLL_SPEED = 20;\r\n    element: Element;\r\n\r\n    dragStart: Observable<DraggableEvent>;\r\n    dragMove: Observable<DraggableEvent>;\r\n    dragStop: Observable<DraggableEvent>;\r\n    // A simple requestAnimationFrame polyfill\r\n    private requestAnimationFrame: Function;\r\n    private cancelAnimationFrame: Function;\r\n    private mousemove: Observable<{} | Event> = merge(\r\n        fromEvent(document, 'mousemove'),\r\n        fromEvent(document, 'touchmove', { passive: false })\r\n    ).pipe(share());\r\n    private mouseup: Observable<{} | Event> = merge(\r\n        fromEvent(document, 'mouseup'),\r\n        fromEvent(document, 'touchend'),\r\n        fromEvent(document, 'touchcancel')\r\n    ).pipe(share());\r\n    private mousedown: Observable<{} | Event>;\r\n    private config = {\r\n        handlerClass: null,\r\n        scroll: true,\r\n        scrollEdge: 36,\r\n        scrollDirection: null\r\n    };\r\n    // reference to auto scrolling listeners\r\n    private autoScrollingInterval = [];\r\n\r\n    constructor(element: Element, config = {}) {\r\n        this.element = element;\r\n        this.mousedown = merge(\r\n            fromEvent(element, 'mousedown'),\r\n            fromEvent(element, 'touchstart')\r\n        ).pipe(share());\r\n\r\n        this.config = { ...this.config, ...config };\r\n\r\n        this.dragStart = this.createDragStartObservable().pipe(share());\r\n        this.dragMove = this.createDragMoveObservable(this.dragStart);\r\n        this.dragStop = this.createDragStopObservable(this.dragStart);\r\n\r\n        this.fixProblemWithDnDForIE(element);\r\n\r\n        this.requestAnimationFrame =\r\n            window.requestAnimationFrame || (callback => setTimeout(callback, 1000 / 60));\r\n        this.cancelAnimationFrame = window.cancelAnimationFrame || (cafID => clearTimeout(cafID));\r\n    }\r\n\r\n    private createDragStartObservable(): Observable<DraggableEvent> {\r\n        return this.mousedown.pipe(\r\n            map(md => new DraggableEvent(md)),\r\n            filter((event: DraggableEvent) => this.isDragingByHandler(event)),\r\n            tap(e => {\r\n                if (!e.isTouchEvent()) {\r\n                    e.pauseEvent();\r\n                }\r\n                if (document.activeElement) {\r\n                    (<any>document.activeElement).blur();\r\n                }\r\n                // prevents rendering performance issues while dragging item with selection inside\r\n                utils.clearSelection();\r\n            }),\r\n            switchMap((startEvent: DraggableEvent) => {\r\n                return this.mousemove.pipe(\r\n                    map(mm => new DraggableEvent(mm)),\r\n                    filter((moveEvent: DraggableEvent) => this.inRange(startEvent, moveEvent, 5)),\r\n                    map(() => startEvent),\r\n                    takeUntil(this.mouseup),\r\n                    take(1)\r\n                );\r\n            })\r\n        );\r\n    }\r\n\r\n    private createDragMoveObservable(\r\n        dragStart: Observable<DraggableEvent>\r\n    ): Observable<DraggableEvent> {\r\n        return dragStart.pipe(\r\n            tap(event => {\r\n                this.addTouchActionNone(event.target);\r\n            }),\r\n            switchMap(startEvent => {\r\n                return this.mousemove.pipe(\r\n                    skip(1),\r\n                    map(mm => new DraggableEvent(mm)),\r\n                    tap(event => {\r\n                        event.pauseEvent();\r\n                        startEvent.pauseEvent();\r\n                    }),\r\n                    takeUntil(this.mouseup)\r\n                );\r\n            }),\r\n            filter(val => !!val),\r\n            tap((event: DraggableEvent) => {\r\n                if (this.config.scroll) {\r\n                    this.startScroll(this.element, event);\r\n                }\r\n            })\r\n        );\r\n    }\r\n\r\n    private createDragStopObservable(dragStart: Observable<DraggableEvent>): Observable<any> {\r\n        return dragStart.pipe(\r\n            switchMap(() => {\r\n                return this.mouseup.pipe(take(1));\r\n            }),\r\n            map(e => new DraggableEvent(e)),\r\n            tap(e => {\r\n                if (e.target) {\r\n                    this.removeTouchActionNone(e.target);\r\n                }\r\n                this.autoScrollingInterval.forEach(raf => this.cancelAnimationFrame(raf));\r\n            })\r\n        );\r\n    }\r\n\r\n    private startScroll(item: Element, event: DraggableEvent) {\r\n        const scrollContainer = this.getScrollContainer(item);\r\n        this.autoScrollingInterval.forEach(raf => this.cancelAnimationFrame(raf));\r\n\r\n        if (scrollContainer) {\r\n            this.startScrollForContainer(event, scrollContainer);\r\n        } else {\r\n            this.startScrollForWindow(event);\r\n        }\r\n    }\r\n\r\n    private startScrollForContainer(event: DraggableEvent, scrollContainer: HTMLElement): void {\r\n        if (!this.config.scrollDirection || this.config.scrollDirection === 'vertical') {\r\n            this.startScrollVerticallyForContainer(event, scrollContainer);\r\n        }\r\n\r\n        if (!this.config.scrollDirection || this.config.scrollDirection === 'horizontal') {\r\n            this.startScrollHorizontallyForContainer(event, scrollContainer);\r\n        }\r\n    }\r\n\r\n    private startScrollVerticallyForContainer(\r\n        event: DraggableEvent,\r\n        scrollContainer: HTMLElement\r\n    ): void {\r\n        if (event.pageY - this.getOffset(scrollContainer).top < this.config.scrollEdge) {\r\n            this.startAutoScrolling(scrollContainer, -Draggable.SCROLL_SPEED, 'scrollTop');\r\n        } else if (\r\n            this.getOffset(scrollContainer).top +\r\n                scrollContainer.getBoundingClientRect().height -\r\n                event.pageY <\r\n            this.config.scrollEdge\r\n        ) {\r\n            this.startAutoScrolling(scrollContainer, Draggable.SCROLL_SPEED, 'scrollTop');\r\n        }\r\n    }\r\n\r\n    private startScrollHorizontallyForContainer(\r\n        event: DraggableEvent,\r\n        scrollContainer: HTMLElement\r\n    ): void {\r\n        if (event.pageX - scrollContainer.getBoundingClientRect().left < this.config.scrollEdge) {\r\n            this.startAutoScrolling(scrollContainer, -Draggable.SCROLL_SPEED, 'scrollLeft');\r\n        } else if (\r\n            this.getOffset(scrollContainer).left +\r\n                scrollContainer.getBoundingClientRect().width -\r\n                event.pageX <\r\n            this.config.scrollEdge\r\n        ) {\r\n            this.startAutoScrolling(scrollContainer, Draggable.SCROLL_SPEED, 'scrollLeft');\r\n        }\r\n    }\r\n\r\n    private startScrollForWindow(event) {\r\n        if (!this.config.scrollDirection || this.config.scrollDirection === 'vertical') {\r\n            this.startScrollVerticallyForWindow(event);\r\n        }\r\n\r\n        if (!this.config.scrollDirection || this.config.scrollDirection === 'horizontal') {\r\n            this.startScrollHorizontallyForWindow(event);\r\n        }\r\n    }\r\n\r\n    private startScrollVerticallyForWindow(event: DraggableEvent): void {\r\n        const scrollingElement =\r\n            document.scrollingElement || document.documentElement || document.body;\r\n\r\n        // NOTE: Using `window.pageYOffset` here because IE doesn't have `window.scrollY`.\r\n        if (event.pageY - window.pageYOffset < this.config.scrollEdge) {\r\n            this.startAutoScrolling(scrollingElement, -Draggable.SCROLL_SPEED, 'scrollTop');\r\n        } else if (\r\n            window.innerHeight - (event.pageY - window.pageYOffset) <\r\n            this.config.scrollEdge\r\n        ) {\r\n            this.startAutoScrolling(scrollingElement, Draggable.SCROLL_SPEED, 'scrollTop');\r\n        }\r\n    }\r\n\r\n    private startScrollHorizontallyForWindow(event: DraggableEvent): void {\r\n        const scrollingElement =\r\n            document.scrollingElement || document.documentElement || document.body;\r\n\r\n        // NOTE: Using `window.pageXOffset` here because IE doesn't have `window.scrollX`.\r\n        if (event.pageX - window.pageXOffset < this.config.scrollEdge) {\r\n            this.startAutoScrolling(scrollingElement, -Draggable.SCROLL_SPEED, 'scrollLeft');\r\n        } else if (\r\n            window.innerWidth - (event.pageX - window.pageXOffset) <\r\n            this.config.scrollEdge\r\n        ) {\r\n            this.startAutoScrolling(scrollingElement, Draggable.SCROLL_SPEED, 'scrollLeft');\r\n        }\r\n    }\r\n\r\n    private getScrollContainer(node): HTMLElement {\r\n        const nodeOuterHeight = utils.getElementOuterHeight(node);\r\n\r\n        if (node.scrollHeight > Math.ceil(nodeOuterHeight)) {\r\n            return node;\r\n        }\r\n\r\n        if (!new RegExp('(body|html)', 'i').test(node.parentNode.tagName)) {\r\n            return this.getScrollContainer(node.parentNode);\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    private startAutoScrolling(node, amount, direction) {\r\n        this.autoScrollingInterval.push(\r\n            this.requestAnimationFrame(\r\n                function() {\r\n                    this.startAutoScrolling(node, amount, direction);\r\n                }.bind(this)\r\n            )\r\n        );\r\n\r\n        return (node[direction] += amount * 0.25);\r\n    }\r\n\r\n    private getOffset(el) {\r\n        const rect = el.getBoundingClientRect();\r\n        return {\r\n            left: rect.left + this.getScroll('scrollLeft', 'pageXOffset'),\r\n            top: rect.top + this.getScroll('scrollTop', 'pageYOffset')\r\n        };\r\n    }\r\n\r\n    private getScroll(scrollProp, offsetProp) {\r\n        if (typeof window[offsetProp] !== 'undefined') {\r\n            return window[offsetProp];\r\n        }\r\n        if (document.documentElement.clientHeight) {\r\n            return document.documentElement[scrollProp];\r\n        }\r\n        return document.body[scrollProp];\r\n    }\r\n\r\n    private isDragingByHandler(event: DraggableEvent): boolean {\r\n        if (!this.isValidDragHandler(event.target)) {\r\n            return false;\r\n        }\r\n\r\n        return (\r\n            !this.config.handlerClass ||\r\n            (this.config.handlerClass &&\r\n                this.hasElementWithClass(this.config.handlerClass, event.target))\r\n        );\r\n    }\r\n\r\n    private isValidDragHandler(targetEl: any): boolean {\r\n        return ['input', 'textarea'].indexOf(targetEl.tagName.toLowerCase()) === -1;\r\n    }\r\n\r\n    private inRange(startEvent: DraggableEvent, moveEvent: DraggableEvent, range: number): boolean {\r\n        return (\r\n            Math.abs(moveEvent.clientX - startEvent.clientX) > range ||\r\n            Math.abs(moveEvent.clientY - startEvent.clientY) > range\r\n        );\r\n    }\r\n\r\n    private hasElementWithClass(className: string, target: any): boolean {\r\n        while (target !== this.element) {\r\n            if (target.classList.contains(className)) {\r\n                return true;\r\n            }\r\n            target = target.parentElement;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private pauseEvent(e: Event): void {\r\n        if (e.stopPropagation) {\r\n            e.stopPropagation();\r\n        }\r\n        if (e.preventDefault) {\r\n            e.preventDefault();\r\n        }\r\n        e.cancelBubble = true;\r\n        e.returnValue = false;\r\n    }\r\n\r\n    private fixProblemWithDnDForIE(element: Element) {\r\n        if (this.isTouchDevice() && this.isIEorEdge() && (<HTMLElement>element).style) {\r\n            (<HTMLElement>element).style['touch-action'] = 'none';\r\n        }\r\n    }\r\n\r\n    private removeTouchActionNone(element: Element) {\r\n        if (!(<HTMLElement>element).style) {\r\n            return;\r\n        }\r\n        (<HTMLElement>element).style['touch-action'] = '';\r\n    }\r\n\r\n    private addTouchActionNone(element) {\r\n        if (!(<HTMLElement>element).style) {\r\n            return;\r\n        }\r\n        (<HTMLElement>element).style['touch-action'] = 'none';\r\n    }\r\n\r\n    private isTouchDevice() {\r\n        return (\r\n            'ontouchstart' in window || navigator.maxTouchPoints // works on most browsers\r\n        ); // works on IE10/11 and Surface\r\n    }\r\n\r\n    private isIEorEdge() {\r\n        const ua = window.navigator.userAgent;\r\n\r\n        const msie = ua.indexOf('MSIE ');\r\n        if (msie > 0) {\r\n            // IE 10 or older => return version number\r\n            return parseInt(ua.substring(msie + 5, ua.indexOf('.', msie)), 10);\r\n        }\r\n\r\n        const trident = ua.indexOf('Trident/');\r\n        if (trident > 0) {\r\n            // IE 11 => return version number\r\n            const rv = ua.indexOf('rv:');\r\n            return parseInt(ua.substring(rv + 3, ua.indexOf('.', rv)), 10);\r\n        }\r\n\r\n        const edge = ua.indexOf('Edge/');\r\n        if (edge > 0) {\r\n            // Edge (IE 12+) => return version number\r\n            return parseInt(ua.substring(edge + 5, ua.indexOf('.', edge)), 10);\r\n        }\r\n\r\n        // other browser\r\n        return false;\r\n    }\r\n}\r\n","import { Component, OnInit, ElementRef, Inject, Host, Input, Output,\r\n    EventEmitter, SimpleChanges, OnChanges, OnDestroy, HostBinding,\r\n    ChangeDetectionStrategy, AfterViewInit, NgZone, ViewEncapsulation } from '@angular/core';\r\nimport { Subscription } from 'rxjs';\r\n\r\nimport { GridsterService } from '../gridster.service';\r\nimport { GridsterPrototypeService } from '../gridster-prototype/gridster-prototype.service';\r\n\r\nimport { GridListItem } from '../gridList/GridListItem';\r\nimport { DraggableEvent } from '../utils/DraggableEvent';\r\nimport { Draggable } from '../utils/draggable';\r\nimport { IGridsterOptions } from '../IGridsterOptions';\r\nimport { GridList } from '../gridList/gridList';\r\nimport { utils } from '../utils/utils';\r\n\r\n@Component({\r\n    selector: 'ngx-gridster-item',\r\n    template: `<div class=\"gridster-item-inner\">\r\n      <ng-content></ng-content>\r\n      <div class=\"gridster-item-resizable-handler handle-s\"></div>\r\n      <div class=\"gridster-item-resizable-handler handle-e\"></div>\r\n      <div class=\"gridster-item-resizable-handler handle-n\"></div>\r\n      <div class=\"gridster-item-resizable-handler handle-w\"></div>\r\n      <div class=\"gridster-item-resizable-handler handle-se\"></div>\r\n      <div class=\"gridster-item-resizable-handler handle-ne\"></div>\r\n      <div class=\"gridster-item-resizable-handler handle-sw\"></div>\r\n      <div class=\"gridster-item-resizable-handler handle-nw\"></div>\r\n    </div>`,\r\n    styles: [`\r\n    ngx-gridster-item {\r\n        display: block;\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        z-index: 1;\r\n        -webkit-transition: none;\r\n        transition: none;\r\n    }\r\n\r\n    .gridster--ready ngx-gridster-item {\r\n        transition: all 200ms ease;\r\n        transition-property: left, top;\r\n    }\r\n\r\n    .gridster--ready.css-transform ngx-gridster-item  {\r\n        transition-property: transform;\r\n    }\r\n\r\n    .gridster--ready ngx-gridster-item.is-dragging,\r\n    .gridster--ready ngx-gridster-item.is-resizing {\r\n        -webkit-transition: none;\r\n        transition: none;\r\n        z-index: 9999;\r\n    }\r\n\r\n    ngx-gridster-item.no-transition {\r\n        -webkit-transition: none;\r\n        transition: none;\r\n    }\r\n    ngx-gridster-item .gridster-item-resizable-handler {\r\n        position: absolute;\r\n        z-index: 2;\r\n        display: none;\r\n    }\r\n\r\n    ngx-gridster-item .gridster-item-resizable-handler.handle-n {\r\n      cursor: n-resize;\r\n      height: 10px;\r\n      right: 0;\r\n      top: 0;\r\n      left: 0;\r\n    }\r\n\r\n    ngx-gridster-item .gridster-item-resizable-handler.handle-e {\r\n      cursor: e-resize;\r\n      width: 10px;\r\n      bottom: 0;\r\n      right: 0;\r\n      top: 0;\r\n    }\r\n\r\n    ngx-gridster-item .gridster-item-resizable-handler.handle-s {\r\n      cursor: s-resize;\r\n      height: 10px;\r\n      right: 0;\r\n      bottom: 0;\r\n      left: 0;\r\n    }\r\n\r\n    ngx-gridster-item .gridster-item-resizable-handler.handle-w {\r\n      cursor: w-resize;\r\n      width: 10px;\r\n      left: 0;\r\n      top: 0;\r\n      bottom: 0;\r\n    }\r\n\r\n    ngx-gridster-item .gridster-item-resizable-handler.handle-ne {\r\n      cursor: ne-resize;\r\n      width: 10px;\r\n      height: 10px;\r\n      right: 0;\r\n      top: 0;\r\n    }\r\n\r\n    ngx-gridster-item .gridster-item-resizable-handler.handle-nw {\r\n      cursor: nw-resize;\r\n      width: 10px;\r\n      height: 10px;\r\n      left: 0;\r\n      top: 0;\r\n    }\r\n\r\n    ngx-gridster-item .gridster-item-resizable-handler.handle-se {\r\n      cursor: se-resize;\r\n      width: 0;\r\n      height: 0;\r\n      right: 0;\r\n      bottom: 0;\r\n      border-style: solid;\r\n      border-width: 0 0 10px 10px;\r\n      border-color: transparent;\r\n    }\r\n\r\n    ngx-gridster-item .gridster-item-resizable-handler.handle-sw {\r\n      cursor: sw-resize;\r\n      width: 10px;\r\n      height: 10px;\r\n      left: 0;\r\n      bottom: 0;\r\n    }\r\n\r\n    ngx-gridster-item:hover .gridster-item-resizable-handler.handle-se {\r\n      border-color: transparent transparent #ccc\r\n    }\r\n    `],\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n    encapsulation: ViewEncapsulation.None\r\n})\r\nexport class GridsterItemComponent implements OnInit, OnChanges, AfterViewInit, OnDestroy {\r\n    @Input() x: number;\r\n    @Output() xChange = new EventEmitter<number>(true);\r\n    @Input() y: number;\r\n    @Output() yChange = new EventEmitter<number>(true);\r\n\r\n    @Input() xSm: number;\r\n    @Output() xSmChange = new EventEmitter<number>(true);\r\n    @Input() ySm: number;\r\n    @Output() ySmChange = new EventEmitter<number>(true);\r\n\r\n    @Input() xMd: number;\r\n    @Output() xMdChange = new EventEmitter<number>(true);\r\n    @Input() yMd: number;\r\n    @Output() yMdChange = new EventEmitter<number>(true);\r\n\r\n    @Input() xLg: number;\r\n    @Output() xLgChange = new EventEmitter<number>(true);\r\n    @Input() yLg: number;\r\n    @Output() yLgChange = new EventEmitter<number>(true);\r\n\r\n    @Input() xXl: number;\r\n    @Output() xXlChange = new EventEmitter<number>(true);\r\n    @Input() yXl: number;\r\n    @Output() yXlChange = new EventEmitter<number>(true);\r\n\r\n\r\n    @Input() w: number;\r\n    @Output() wChange = new EventEmitter<number>(true);\r\n    @Input() h: number;\r\n    @Output() hChange = new EventEmitter<number>(true);\r\n\r\n    @Input() wSm: number;\r\n    @Output() wSmChange = new EventEmitter<number>(true);\r\n    @Input() hSm: number;\r\n    @Output() hSmChange = new EventEmitter<number>(true);\r\n\r\n    @Input() wMd: number;\r\n    @Output() wMdChange = new EventEmitter<number>(true);\r\n    @Input() hMd: number;\r\n    @Output() hMdChange = new EventEmitter<number>(true);\r\n\r\n    @Input() wLg: number;\r\n    @Output() wLgChange = new EventEmitter<number>(true);\r\n    @Input() hLg: number;\r\n    @Output() hLgChange = new EventEmitter<number>(true);\r\n\r\n    @Input() wXl: number;\r\n    @Output() wXlChange = new EventEmitter<number>(true);\r\n    @Input() hXl: number;\r\n    @Output() hXlChange = new EventEmitter<number>(true);\r\n\r\n    @Output() change = new EventEmitter<any>(true);\r\n    @Output() start = new EventEmitter<any>(true);\r\n    @Output() end = new EventEmitter<any>(true);\r\n\r\n    @Input() dragAndDrop = true;\r\n    @Input() resizable = true;\r\n\r\n    @Input() options: any = {};\r\n\r\n    autoSize: boolean;\r\n\r\n    @HostBinding('class.is-dragging') isDragging = false;\r\n    @HostBinding('class.is-resizing') isResizing = false;\r\n\r\n    $element: HTMLElement;\r\n    elementRef: ElementRef;\r\n    /**\r\n     * Gridster provider service\r\n     */\r\n    gridster: GridsterService;\r\n\r\n    item: GridListItem;\r\n\r\n    set positionX(value: number) {\r\n        this._positionX = value;\r\n    }\r\n    get positionX() {\r\n        return this._positionX;\r\n    }\r\n    set positionY(value: number) {\r\n        this._positionY = value;\r\n    }\r\n    get positionY() {\r\n        return this._positionY;\r\n    }\r\n    private _positionX: number;\r\n    private _positionY: number;\r\n\r\n    private defaultOptions: any = {\r\n        minWidth: 1,\r\n        minHeight: 1,\r\n        maxWidth: Infinity,\r\n        maxHeight: Infinity,\r\n        defaultWidth: 1,\r\n        defaultHeight: 1\r\n    };\r\n    private subscriptions: Array<Subscription> = [];\r\n    private dragSubscriptions: Array<Subscription> = [];\r\n    private resizeSubscriptions: Array<Subscription> = [];\r\n\r\n    constructor(private zone: NgZone,\r\n                private gridsterPrototypeService: GridsterPrototypeService,\r\n                @Inject(ElementRef) elementRef: ElementRef,\r\n                @Inject(GridsterService) gridster: GridsterService) {\r\n\r\n        this.gridster = gridster;\r\n        this.elementRef = elementRef;\r\n        this.$element = elementRef.nativeElement;\r\n\r\n        this.item = (new GridListItem()).setFromGridsterItem(this);\r\n\r\n        // if gridster is initialized do not show animation on new grid-item construct\r\n        if (this.gridster.isInitialized()) {\r\n            this.preventAnimation();\r\n        }\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.options = Object.assign(this.defaultOptions, this.options);\r\n\r\n        this.w = this.w || this.options.defaultWidth;\r\n        this.h = this.h || this.options.defaultHeight;\r\n        this.wSm = this.wSm || this.w;\r\n        this.hSm = this.hSm || this.h;\r\n        this.wMd = this.wMd || this.w;\r\n        this.hMd = this.hMd || this.h;\r\n        this.wLg = this.wLg || this.w;\r\n        this.hLg = this.hLg || this.h;\r\n        this.wXl = this.wXl || this.w;\r\n        this.hXl = this.hXl || this.h;\r\n\r\n        if (this.gridster.isInitialized()) {\r\n            this.setPositionsOnItem();\r\n        }\r\n\r\n        this.gridster.registerItem(this.item);\r\n\r\n        this.gridster.calculateCellSize();\r\n        this.item.applySize();\r\n        this.item.applyPosition();\r\n\r\n        if (this.gridster.options.dragAndDrop && this.dragAndDrop) {\r\n            this.enableDragDrop();\r\n        }\r\n\r\n        if (this.gridster.isInitialized()) {\r\n            this.gridster.render();\r\n            this.gridster.updateCachedItems();\r\n        }\r\n    }\r\n\r\n    ngAfterViewInit() {\r\n        if (this.gridster.options.resizable && this.item.resizable) {\r\n            this.enableResizable();\r\n        }\r\n    }\r\n\r\n    ngOnChanges(changes: SimpleChanges) {\r\n        if (!this.gridster.gridList) {\r\n            return;\r\n        }\r\n        let rerender = false;\r\n\r\n        ['w', ...Object.keys(GridListItem.W_PROPERTY_MAP).map(breakpoint => GridListItem.W_PROPERTY_MAP[breakpoint])]\r\n        .filter(propName => changes[propName] && !changes[propName].isFirstChange())\r\n        .forEach((propName: string) => {\r\n            if (changes[propName].currentValue > this.options.maxWidth) {\r\n                this[propName] = this.options.maxWidth;\r\n                setTimeout(() => this[propName + 'Change'].emit(this[propName]));\r\n            }\r\n            rerender = true;\r\n        });\r\n\r\n        ['h', ...Object.keys(GridListItem.H_PROPERTY_MAP).map(breakpoint => GridListItem.H_PROPERTY_MAP[breakpoint])]\r\n            .filter(propName => changes[propName] && !changes[propName].isFirstChange())\r\n            .forEach((propName: string) => {\r\n                if (changes[propName].currentValue > this.options.maxHeight) {\r\n                    this[propName] = this.options.maxHeight;\r\n                    setTimeout(() => this[propName + 'Change'].emit(this[propName]));\r\n                }\r\n                rerender = true;\r\n            });\r\n\r\n        ['x', 'y',\r\n        ...Object.keys(GridListItem.X_PROPERTY_MAP).map(breakpoint => GridListItem.X_PROPERTY_MAP[breakpoint]),\r\n        ...Object.keys(GridListItem.Y_PROPERTY_MAP).map(breakpoint => GridListItem.Y_PROPERTY_MAP[breakpoint])]\r\n            .filter(propName => changes[propName] && !changes[propName].isFirstChange())\r\n            .forEach((propName: string) => rerender = true);\r\n\r\n        if (changes['dragAndDrop'] && !changes['dragAndDrop'].isFirstChange()) {\r\n            if (changes['dragAndDrop'].currentValue && this.gridster.options.dragAndDrop) {\r\n                this.enableDragDrop();\r\n            } else {\r\n                this.disableDraggable();\r\n            }\r\n        }\r\n        if (changes['resizable'] && !changes['resizable'].isFirstChange()) {\r\n            if (changes['resizable'].currentValue && this.gridster.options.resizable) {\r\n                this.enableResizable();\r\n            } else {\r\n                this.disableResizable();\r\n            }\r\n        }\r\n\r\n        if (rerender && this.gridster.gridsterComponent.isReady) {\r\n            this.gridster.debounceRenderSubject.next();\r\n        }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.gridster.removeItem(this.item);\r\n        this.gridster.itemRemoveSubject.next(this.item);\r\n\r\n        this.subscriptions.forEach((sub: Subscription) => {\r\n            sub.unsubscribe();\r\n        });\r\n        this.disableDraggable();\r\n        this.disableResizable();\r\n    }\r\n\r\n    updateElemenetPosition() {\r\n        if (this.gridster.options.useCSSTransforms) {\r\n            utils.setTransform(this.$element, {x: this._positionX, y: this._positionY});\r\n        } else {\r\n            utils.setCssElementPosition(this.$element, {x: this._positionX, y: this._positionY});\r\n        }\r\n    }\r\n\r\n    setPositionsOnItem() {\r\n        if (!this.item.hasPositions(this.gridster.options.breakpoint)) {\r\n            this.setPositionsForGrid(this.gridster.options);\r\n        }\r\n\r\n        this.gridster.gridsterOptions.responsiveOptions\r\n            .filter((options: IGridsterOptions) => !this.item.hasPositions(options.breakpoint))\r\n            .forEach((options: IGridsterOptions) => this.setPositionsForGrid(options));\r\n    }\r\n\r\n    public enableResizable() {\r\n        if (this.resizeSubscriptions.length) {\r\n            return;\r\n        }\r\n\r\n        this.zone.runOutsideAngular(() => {\r\n            this.getResizeHandlers().forEach((handler) => {\r\n                const direction = this.getResizeDirection(handler);\r\n\r\n                if (this.hasResizableHandle(direction)) {\r\n                    handler.style.display = 'block';\r\n                }\r\n\r\n                const draggable = new Draggable(handler, this.getResizableOptions());\r\n\r\n                let startEvent;\r\n                let startData;\r\n                let cursorToElementPosition;\r\n\r\n                const dragStartSub = draggable.dragStart\r\n                    .subscribe((event: DraggableEvent) => {\r\n                        this.zone.run(() => {\r\n                            this.isResizing = true;\r\n\r\n                            startEvent = event;\r\n                            startData = this.createResizeStartObject(direction);\r\n                            cursorToElementPosition = event.getRelativeCoordinates(this.$element);\r\n\r\n                            this.gridster.onResizeStart(this.item);\r\n                            this.onStart('resize');\r\n                        });\r\n                    });\r\n\r\n                const dragSub = draggable.dragMove\r\n                    .subscribe((event: DraggableEvent) => {\r\n                        const scrollData = this.gridster.gridsterScrollData;\r\n\r\n                        this.resizeElement({\r\n                            direction,\r\n                            startData,\r\n                            position: {\r\n                                x: event.clientX - cursorToElementPosition.x - this.gridster.gridsterRect.left,\r\n                                y: event.clientY - cursorToElementPosition.y - this.gridster.gridsterRect.top\r\n                            },\r\n                            startEvent,\r\n                            moveEvent: event,\r\n                            scrollDiffX: scrollData.scrollLeft - startData.scrollLeft,\r\n                            scrollDiffY: scrollData.scrollTop - startData.scrollTop\r\n                        });\r\n\r\n                        this.gridster.onResizeDrag(this.item);\r\n                    });\r\n\r\n                const dragStopSub = draggable.dragStop\r\n                    .subscribe(() => {\r\n                        this.zone.run(() => {\r\n                            this.isResizing = false;\r\n\r\n                            this.gridster.onResizeStop(this.item);\r\n                            this.onEnd('resize');\r\n                        });\r\n                    });\r\n\r\n                this.resizeSubscriptions = this.resizeSubscriptions.concat([dragStartSub, dragSub, dragStopSub]);\r\n\r\n            });\r\n        });\r\n    }\r\n\r\n    public disableResizable() {\r\n        this.resizeSubscriptions.forEach((sub: Subscription) => {\r\n            sub.unsubscribe();\r\n        });\r\n        this.resizeSubscriptions = [];\r\n\r\n        [].forEach.call(this.$element.querySelectorAll('.gridster-item-resizable-handler'), (handler) => {\r\n            handler.style.display = '';\r\n        });\r\n    }\r\n\r\n    public enableDragDrop() {\r\n        if (this.dragSubscriptions.length) {\r\n            return;\r\n        }\r\n        this.zone.runOutsideAngular(() => {\r\n            let cursorToElementPosition;\r\n\r\n            const draggable = new Draggable(this.$element, this.getDraggableOptions());\r\n\r\n            const dragStartSub = draggable.dragStart\r\n                .subscribe((event: DraggableEvent) => {\r\n                    this.zone.run(() => {\r\n                        this.gridster.onStart(this.item);\r\n                        this.isDragging = true;\r\n                        this.onStart('drag');\r\n\r\n                        cursorToElementPosition = event.getRelativeCoordinates(this.$element);\r\n                    });\r\n                });\r\n\r\n            const dragSub = draggable.dragMove\r\n                .subscribe((event: DraggableEvent) => {\r\n\r\n                    this.positionY = (event.clientY - cursorToElementPosition.y -\r\n                        this.gridster.gridsterRect.top);\r\n                    this.positionX = (event.clientX - cursorToElementPosition.x -\r\n                        this.gridster.gridsterRect.left);\r\n                    this.updateElemenetPosition();\r\n\r\n                    this.gridster.onDrag(this.item);\r\n                });\r\n\r\n            const dragStopSub = draggable.dragStop\r\n                .subscribe(() => {\r\n                    this.zone.run(() => {\r\n                        this.gridster.onStop(this.item);\r\n                        this.gridster.debounceRenderSubject.next();\r\n                        this.isDragging = false;\r\n                        this.onEnd('drag');\r\n                    });\r\n                });\r\n\r\n            this.dragSubscriptions = this.dragSubscriptions.concat([dragStartSub, dragSub, dragStopSub]);\r\n        });\r\n    }\r\n\r\n    public disableDraggable() {\r\n        this.dragSubscriptions.forEach((sub: Subscription) => {\r\n            sub.unsubscribe();\r\n        });\r\n        this.dragSubscriptions = [];\r\n    }\r\n\r\n    private getResizeHandlers(): HTMLElement[]  {\r\n        return [].filter.call(this.$element.children[0].children, (el) => {\r\n\r\n            return el.classList.contains('gridster-item-resizable-handler');\r\n        });\r\n    }\r\n\r\n    private getDraggableOptions() {\r\n        return { scrollDirection: this.gridster.options.direction, ...this.gridster.draggableOptions };\r\n    }\r\n\r\n    private getResizableOptions() {\r\n        const resizableOptions: any = {};\r\n\r\n        if (this.gridster.draggableOptions.scroll || this.gridster.draggableOptions.scroll === false) {\r\n            resizableOptions.scroll = this.gridster.draggableOptions.scroll;\r\n        }\r\n        if (this.gridster.draggableOptions.scrollEdge) {\r\n            resizableOptions.scrollEdge = this.gridster.draggableOptions.scrollEdge;\r\n        }\r\n\r\n        resizableOptions.scrollDirection = this.gridster.options.direction;\r\n\r\n        return resizableOptions;\r\n    }\r\n\r\n    private hasResizableHandle(direction: string): boolean {\r\n        const isItemResizable = this.gridster.options.resizable && this.item.resizable;\r\n        const resizeHandles = this.gridster.options.resizeHandles;\r\n\r\n        return isItemResizable && (!resizeHandles || (resizeHandles && !!resizeHandles[direction]));\r\n    }\r\n\r\n    private setPositionsForGrid(options: IGridsterOptions) {\r\n        let x, y;\r\n\r\n        const position = this.findPosition(options);\r\n        x = options.direction === 'horizontal' ? position[0] : position[1];\r\n        y = options.direction === 'horizontal' ? position[1] : position[0];\r\n\r\n        this.item.setValueX(x, options.breakpoint);\r\n        this.item.setValueY(y, options.breakpoint);\r\n\r\n        setTimeout(() => {\r\n            this.item.triggerChangeX(options.breakpoint);\r\n            this.item.triggerChangeY(options.breakpoint);\r\n        });\r\n    }\r\n\r\n    private findPosition(options: IGridsterOptions): Array<number> {\r\n        const gridList = new GridList(\r\n            this.gridster.items.map(item => item.copyForBreakpoint(options.breakpoint)),\r\n            options\r\n        );\r\n\r\n        return gridList.findPositionForItem(this.item, {x: 0, y: 0});\r\n    }\r\n\r\n    private createResizeStartObject(direction: string) {\r\n        const scrollData = this.gridster.gridsterScrollData;\r\n\r\n        return {\r\n            top: this.positionY,\r\n            left: this.positionX,\r\n            height: parseInt(this.$element.style.height, 10),\r\n            width: parseInt(this.$element.style.width, 10),\r\n            minX: Math.max(this.item.x + this.item.w - this.options.maxWidth, 0),\r\n            maxX: this.item.x + this.item.w - this.options.minWidth,\r\n            minY: Math.max(this.item.y + this.item.h - this.options.maxHeight, 0),\r\n            maxY: this.item.y + this.item.h - this.options.minHeight,\r\n            minW: this.options.minWidth,\r\n            maxW: Math.min(\r\n                this.options.maxWidth,\r\n                (this.gridster.options.direction === 'vertical' && direction.indexOf('w') < 0) ?\r\n                this.gridster.options.lanes - this.item.x : this.options.maxWidth,\r\n                direction.indexOf('w') >= 0 ?\r\n                this.item.x + this.item.w : this.options.maxWidth\r\n            ),\r\n            minH: this.options.minHeight,\r\n            maxH: Math.min(\r\n                this.options.maxHeight,\r\n                (this.gridster.options.direction === 'horizontal' && direction.indexOf('n') < 0) ?\r\n                this.gridster.options.lanes - this.item.y : this.options.maxHeight,\r\n                direction.indexOf('n') >= 0 ?\r\n                this.item.y + this.item.h : this.options.maxHeight\r\n            ),\r\n            scrollLeft: scrollData.scrollLeft,\r\n            scrollTop: scrollData.scrollTop\r\n        };\r\n    }\r\n\r\n    private onEnd(actionType: string): void {\r\n        this.end.emit({action: actionType, item: this.item});\r\n    }\r\n\r\n    private onStart(actionType: string): void {\r\n        this.start.emit({action: actionType, item: this.item});\r\n    }\r\n\r\n    /**\r\n     * Assign class for short while to prevent animation of grid item component\r\n     */\r\n    private preventAnimation(): GridsterItemComponent {\r\n        this.$element.classList.add('no-transition');\r\n        setTimeout(() => {\r\n            this.$element.classList.remove('no-transition');\r\n        }, 500);\r\n\r\n        return this;\r\n    }\r\n\r\n    private getResizeDirection(handler: Element): string {\r\n        for (let i = handler.classList.length - 1; i >= 0; i--) {\r\n            if (handler.classList[i].match('handle-')) {\r\n                return handler.classList[i].split('-')[1];\r\n            }\r\n        }\r\n    }\r\n\r\n    private resizeElement(config: any): void {\r\n        // north\r\n        if (config.direction.indexOf('n') >= 0) {\r\n            this.resizeToNorth(config);\r\n        }\r\n        // west\r\n        if (config.direction.indexOf('w') >= 0) {\r\n            this.resizeToWest(config);\r\n        }\r\n        // east\r\n        if (config.direction.indexOf('e') >= 0) {\r\n            this.resizeToEast(config);\r\n        }\r\n        // south\r\n        if (config.direction.indexOf('s') >= 0) {\r\n            this.resizeToSouth(config);\r\n        }\r\n    }\r\n\r\n    private resizeToNorth(config: any): void {\r\n        const height = config.startData.height + config.startEvent.clientY -\r\n            config.moveEvent.clientY - config.scrollDiffY;\r\n\r\n        if (height < (config.startData.minH * this.gridster.cellHeight)) {\r\n            this.setMinHeight('n', config);\r\n        } else if (height > (config.startData.maxH * this.gridster.cellHeight)) {\r\n            this.setMaxHeight('n', config);\r\n        } else {\r\n            this.positionY = config.position.y;\r\n            this.$element.style.height = height + 'px';\r\n        }\r\n    }\r\n\r\n    private resizeToWest(config: any): void {\r\n        const width = config.startData.width + config.startEvent.clientX -\r\n            config.moveEvent.clientX - config.scrollDiffX;\r\n\r\n        if (width < (config.startData.minW * this.gridster.cellWidth)) {\r\n            this.setMinWidth('w', config);\r\n        } else if (width > (config.startData.maxW * this.gridster.cellWidth)) {\r\n            this.setMaxWidth('w', config);\r\n        } else {\r\n            this.positionX = config.position.x;\r\n            this.updateElemenetPosition();\r\n            this.$element.style.width = width + 'px';\r\n        }\r\n    }\r\n\r\n    private resizeToEast(config: any): void {\r\n        const width = config.startData.width + config.moveEvent.clientX -\r\n            config.startEvent.clientX + config.scrollDiffX;\r\n\r\n        if (width > (config.startData.maxW * this.gridster.cellWidth)) {\r\n            this.setMaxWidth('e', config);\r\n        } else if (width < (config.startData.minW * this.gridster.cellWidth)) {\r\n            this.setMinWidth('e', config);\r\n        } else {\r\n            this.$element.style.width = width + 'px';\r\n        }\r\n    }\r\n\r\n    private resizeToSouth(config: any): void {\r\n        const height = config.startData.height + config.moveEvent.clientY -\r\n            config.startEvent.clientY + config.scrollDiffY;\r\n\r\n        if (height > config.startData.maxH * this.gridster.cellHeight) {\r\n            this.setMaxHeight('s', config);\r\n        } else if (height < config.startData.minH * this.gridster.cellHeight) {\r\n            this.setMinHeight('s', config);\r\n        } else {\r\n            this.$element.style.height = height + 'px';\r\n        }\r\n    }\r\n\r\n    private setMinHeight(direction: string, config: any): void {\r\n        if (direction === 'n') {\r\n            this.$element.style.height = (config.startData.minH * this.gridster.cellHeight) + 'px';\r\n            this.positionY = config.startData.maxY * this.gridster.cellHeight;\r\n        } else {\r\n            this.$element.style.height = (config.startData.minH * this.gridster.cellHeight) + 'px';\r\n        }\r\n    }\r\n\r\n    private setMinWidth(direction: string, config: any): void {\r\n        if (direction === 'w') {\r\n            this.$element.style.width = (config.startData.minW * this.gridster.cellWidth) + 'px';\r\n            this.positionX = config.startData.maxX * this.gridster.cellWidth;\r\n            this.updateElemenetPosition();\r\n        } else {\r\n            this.$element.style.width = (config.startData.minW * this.gridster.cellWidth) + 'px';\r\n        }\r\n    }\r\n\r\n    private setMaxHeight(direction: string, config: any): void {\r\n\r\n        if (direction === 'n') {\r\n            this.$element.style.height = (config.startData.maxH * this.gridster.cellHeight) + 'px';\r\n            this.positionY = config.startData.minY * this.gridster.cellHeight;\r\n        } else {\r\n            this.$element.style.height = (config.startData.maxH * this.gridster.cellHeight) + 'px';\r\n        }\r\n    }\r\n\r\n    private setMaxWidth(direction: string, config: any): void {\r\n\r\n        if (direction === 'w') {\r\n            this.$element.style.width = (config.startData.maxW * this.gridster.cellWidth) + 'px';\r\n            this.positionX = config.startData.minX * this.gridster.cellWidth;\r\n            this.updateElemenetPosition();\r\n        } else {\r\n            this.$element.style.width = (config.startData.maxW * this.gridster.cellWidth) + 'px';\r\n        }\r\n    }\r\n}\r\n","import { Directive, ElementRef, Input, Output, HostBinding, EventEmitter, OnInit, OnDestroy,\r\n    NgZone} from '@angular/core';\r\nimport { Observable, Subscription, fromEvent } from 'rxjs';\r\n\r\nimport { GridsterPrototypeService } from './gridster-prototype.service';\r\nimport { GridListItem } from '../gridList/GridListItem';\r\nimport { GridsterService } from '../gridster.service';\r\nimport { DraggableEvent } from '../utils/DraggableEvent';\r\nimport { Draggable } from '../utils/draggable';\r\nimport { utils } from '../utils/utils';\r\n\r\n@Directive({\r\n    selector: '[ngxGridsterItemPrototype]'\r\n})\r\nexport class GridsterItemPrototypeDirective implements OnInit, OnDestroy {\r\n    @Output() drop = new EventEmitter();\r\n    @Output() start = new EventEmitter();\r\n    @Output() cancel = new EventEmitter();\r\n    @Output() enter = new EventEmitter();\r\n    @Output() out = new EventEmitter();\r\n\r\n    @Input() data: any;\r\n    @Input() config: any = {};\r\n\r\n    public x = 0;\r\n    public y = 0;\r\n    @Input() w: number;\r\n    @Input() wSm: number;\r\n    @Input() wMd: number;\r\n    @Input() wLg: number;\r\n    @Input() wXl: number;\r\n    @Input() h: number;\r\n    @Input() hSm: number;\r\n    @Input() hMd: number;\r\n    @Input() hLg: number;\r\n    @Input() hXl: number;\r\n\r\n    positionX: number;\r\n    positionY: number;\r\n\r\n    autoSize = false;\r\n\r\n    $element: HTMLElement;\r\n\r\n    /**\r\n     * Mouse drag observable\r\n     */\r\n    drag: Observable<any>;\r\n\r\n    /**\r\n     * Subscribtion for drag observable\r\n     */\r\n    dragSubscription: Subscription;\r\n\r\n    isDragging = false;\r\n\r\n    item: GridListItem;\r\n\r\n    containerRectange: ClientRect;\r\n\r\n    private dragContextGridster: GridsterService;\r\n    private parentRect: ClientRect;\r\n    private parentOffset: {left: number, top: number};\r\n\r\n    private subscribtions: Array<Subscription> = [];\r\n\r\n    // must be set to true because of item dragAndDrop configuration\r\n    get dragAndDrop(): boolean {\r\n        return true;\r\n    }\r\n\r\n    get gridster(): GridsterService {\r\n        return this.dragContextGridster;\r\n    }\r\n\r\n    constructor(private zone: NgZone,\r\n                private elementRef: ElementRef,\r\n                private gridsterPrototype: GridsterPrototypeService) {\r\n\r\n        this.item = (new GridListItem()).setFromGridsterItemPrototype(this);\r\n    }\r\n\r\n    ngOnInit() {\r\n        this.wSm = this.wSm || this.w;\r\n        this.hSm = this.hSm || this.h;\r\n        this.wMd = this.wMd || this.w;\r\n        this.hMd = this.hMd || this.h;\r\n        this.wLg = this.wLg || this.w;\r\n        this.hLg = this.hLg || this.h;\r\n        this.wXl = this.wXl || this.w;\r\n        this.hXl = this.hXl || this.h;\r\n        this.zone.runOutsideAngular(() => {\r\n            this.enableDragDrop();\r\n        });\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.subscribtions.forEach((sub: Subscription) => {\r\n            sub.unsubscribe();\r\n        });\r\n    }\r\n\r\n    onDrop (gridster: GridsterService): void {\r\n        if (!this.config.helper) {\r\n            this.$element.parentNode.removeChild(this.$element);\r\n        }\r\n\r\n        this.drop.emit({\r\n            item: this.item,\r\n            gridster: gridster\r\n        });\r\n    }\r\n\r\n    onCancel (): void {\r\n        this.cancel.emit({item: this.item});\r\n    }\r\n\r\n    onEnter (gridster: GridsterService): void {\r\n        this.enter.emit({\r\n            item: this.item,\r\n            gridster: gridster\r\n        });\r\n    }\r\n\r\n    onOver (gridster: GridsterService): void {}\r\n\r\n    onOut (gridster: GridsterService): void {\r\n        this.out.emit({\r\n            item: this.item,\r\n            gridster: gridster\r\n        });\r\n    }\r\n\r\n    getPositionToGridster(gridster: GridsterService) {\r\n        const relativeContainerCoords = this.getContainerCoordsToGridster(gridster);\r\n\r\n        return {\r\n            y: this.positionY - relativeContainerCoords.top,\r\n            x: this.positionX - relativeContainerCoords.left\r\n        };\r\n    }\r\n\r\n    setDragContextGridster(gridster: GridsterService) {\r\n        this.dragContextGridster = gridster;\r\n    }\r\n\r\n    private getContainerCoordsToGridster(gridster: GridsterService): {top: number, left: number} {\r\n        return {\r\n            left: gridster.gridsterRect.left - this.parentRect.left,\r\n            top: gridster.gridsterRect.top - this.parentRect.top\r\n        };\r\n    }\r\n\r\n    private enableDragDrop() {\r\n        let cursorToElementPosition;\r\n        const draggable = new Draggable(this.elementRef.nativeElement);\r\n\r\n        const dragStartSub = draggable.dragStart\r\n            .subscribe((event: DraggableEvent) => {\r\n                this.zone.run(() => {\r\n                    this.$element = this.provideDragElement();\r\n                    this.containerRectange = this.$element.parentElement.getBoundingClientRect();\r\n                    this.updateParentElementData();\r\n                    this.onStart(event);\r\n\r\n                    cursorToElementPosition = event.getRelativeCoordinates(this.$element);\r\n                });\r\n            });\r\n\r\n        const dragSub = draggable.dragMove\r\n            .subscribe((event: DraggableEvent) => {\r\n\r\n                this.setElementPosition(this.$element, {\r\n                    x: event.clientX - cursorToElementPosition.x  - this.parentRect.left,\r\n                    y: event.clientY - cursorToElementPosition.y  - this.parentRect.top\r\n                });\r\n\r\n                this.onDrag(event);\r\n            });\r\n\r\n        const dragStopSub = draggable.dragStop\r\n            .subscribe((event: DraggableEvent) => {\r\n                this.zone.run(() => {\r\n                    this.onStop(event);\r\n                    this.$element = null;\r\n                });\r\n            });\r\n\r\n        const scrollSub = fromEvent(document, 'scroll')\r\n            .subscribe(() => {\r\n                if (this.$element) {\r\n                    this.updateParentElementData();\r\n                }\r\n            });\r\n\r\n        this.subscribtions = this.subscribtions.concat([dragStartSub, dragSub, dragStopSub, scrollSub]);\r\n    }\r\n\r\n    private setElementPosition(element: HTMLElement, position: {x: number, y: number}) {\r\n        this.positionX = position.x;\r\n        this.positionY = position.y;\r\n        utils.setCssElementPosition(element, position);\r\n    }\r\n\r\n    private updateParentElementData() {\r\n        this.parentRect = this.$element.parentElement.getBoundingClientRect();\r\n        this.parentOffset = {\r\n            left: this.$element.parentElement.offsetLeft,\r\n            top: this.$element.parentElement.offsetTop\r\n        };\r\n    }\r\n\r\n    private onStart (event: DraggableEvent): void {\r\n        this.isDragging = true;\r\n\r\n        this.$element.style.pointerEvents = 'none';\r\n        this.$element.style.position = 'absolute';\r\n\r\n        this.gridsterPrototype.dragItemStart(this, event);\r\n\r\n        this.start.emit({item: this.item});\r\n    }\r\n\r\n    private onDrag (event: DraggableEvent): void {\r\n        this.gridsterPrototype.updatePrototypePosition(this, event);\r\n    }\r\n\r\n    private onStop (event: DraggableEvent): void {\r\n        this.gridsterPrototype.dragItemStop(this, event);\r\n\r\n        this.isDragging = false;\r\n        this.$element.style.pointerEvents = 'auto';\r\n        this.$element.style.position = '';\r\n        utils.resetCSSElementPosition(this.$element);\r\n\r\n        if (this.config.helper) {\r\n            this.$element.parentNode.removeChild(this.$element);\r\n        }\r\n    }\r\n\r\n    private provideDragElement (): HTMLElement {\r\n        let dragElement = this.elementRef.nativeElement;\r\n\r\n        if (this.config.helper) {\r\n            dragElement = <any>(dragElement).cloneNode(true);\r\n\r\n            document.body.appendChild(this.fixStylesForBodyHelper(dragElement));\r\n        } else {\r\n            this.fixStylesForRelativeElement(dragElement);\r\n        }\r\n\r\n        return dragElement;\r\n    }\r\n\r\n    private fixStylesForRelativeElement(el: HTMLElement) {\r\n        if (window.getComputedStyle(el).position === 'absolute') {\r\n            return el;\r\n        }\r\n        const rect = this.elementRef.nativeElement.getBoundingClientRect();\r\n        this.containerRectange = el.parentElement.getBoundingClientRect();\r\n\r\n        el.style.position = 'absolute';\r\n        this.setElementPosition(el, {\r\n            x: rect.left - this.containerRectange.left,\r\n            y: rect.top - this.containerRectange.top\r\n        });\r\n\r\n        return el;\r\n    }\r\n\r\n    /**\r\n     * When element is cloned and append to body it should have position absolute and coords set by original\r\n     * relative prototype element position.\r\n     */\r\n    private fixStylesForBodyHelper (el: HTMLElement) {\r\n        const bodyRect = document.body.getBoundingClientRect();\r\n        const rect = this.elementRef.nativeElement.getBoundingClientRect();\r\n\r\n        el.style.position = 'absolute';\r\n        this.setElementPosition(el, {\r\n            x: rect.left - bodyRect.left,\r\n            y: rect.top - bodyRect.top\r\n        });\r\n\r\n        return el;\r\n    }\r\n\r\n}\r\n","import { NgModule, ModuleWithProviders } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\n\r\nimport { GridsterComponent } from './gridster.component';\r\nimport { GridsterItemComponent } from './gridster-item/gridster-item.component';\r\nimport { GridsterItemPrototypeDirective } from './gridster-prototype/gridster-item-prototype.directive';\r\nimport { GridsterPrototypeService } from './gridster-prototype/gridster-prototype.service';\r\n\r\n@NgModule({\r\n    imports: [\r\n        CommonModule\r\n    ],\r\n    declarations: [\r\n        GridsterComponent,\r\n        GridsterItemComponent,\r\n        GridsterItemPrototypeDirective\r\n    ],\r\n    exports: [\r\n        GridsterComponent,\r\n        GridsterItemComponent,\r\n        GridsterItemPrototypeDirective\r\n    ]\r\n})\r\nexport class GridsterModule {\r\n    static forRoot(): ModuleWithProviders<GridsterModule> {\r\n    return {\r\n        ngModule: GridsterModule,\r\n        providers: [GridsterPrototypeService]\r\n    };\r\n}\r\n}\r\n\r\n","/*\r\n * Public API Surface of gridster\r\n */\r\n\r\nexport * from './lib/gridster.module';\r\nexport * from './lib/gridster.component';\r\nexport * from './lib/gridster-item/gridster-item.component';\r\nexport * from './lib/gridster-prototype/gridster-item-prototype.directive';\r\nexport * from './lib/IGridsterOptions';\r\nexport * from './lib/IGridsterDraggableOptions';\r\nexport * from './lib/GridsterOptions';\r\nexport * from './lib/gridster-prototype/gridster-prototype.service';\r\nexport * from './lib/gridster.service';\r\nexport * from './lib/gridList/GridListItem';\r\n\r\n","/**\n * Generated bundle index. Do not edit.\n */\n\nexport * from './public_api';\n"],"names":[],"mappings":"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"}